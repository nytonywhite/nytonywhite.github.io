var Vijs=Vijs||{};Vijs.Util={domHelper:function(e){var t,i=this,n=i.cssHelper();t="string"==typeof e?document.createElement(e):e.el?e.el:Vijs.Util.isDom(e)?e:e;var r={el:t,innerCss:n,bind:function(e,t){var n=this.el;return i.addListener(n,e,t),this},unbind:function(e,t){var n=this.el;return i.removeListener(n,e,t),this},trigger:function(e,t){var n=this.el;return i.triggerEvent(n,e,t),this},attr:function(e,t){if(1==arguments.length&&"object"==typeof e){for(var i in e)this.el.setAttribute(i,e[i]);return this}return 1==arguments.length?this.el.getAttribute(e):(this.el.setAttribute(e,t),this)},css:function(){return this.innerCss.css.apply(this.innerCss,arguments),this.innerCss.addStyleToDom(this.el),this},startAnimate:function(e){return this.innerCss.addStyleToDom(this.el,!e),this},insertTo:function(e){var t=e.el&&e.el.appendChild?e.el:e;return t.appendChild(this.el),this},insertEl:function(e){var t=e.el?e.el:e;return this.el.appendChild(t),this},size:function(){var e=this.el.clientWidth,t=this.el.clientHeight;return{width:e,height:t}},html:function(e){return e?(this.el.innerHTML=e,this):this.el.innerHTML},text:function(e){return e?(this.el.innerText=e,this):this.el.innerText},appendText:function(e){var t=document.createElement("span");return t.innerText=e,this.el.appendChild(t),this},parent:function(){return this.el.parentElement?Vijs.Util.domHelper(this.el.parentElement):null},remove:function(){return this.el.parentElement?this.el.parentElement.removeChild(this.el):this.el.remove(),this}};return r},cssHelper:function(e){var t="animate"+(new Date).getTime(),i={path:e,animateName:t,mode:{"animation-duration":"1s","animation-timing-function":"ease","animation-delay":"0s","animation-iteration-count":"1","animation-direction":"normal","animation-play-state":"running","animation-fill-mode":"forwards"},css3Warper:["-webkit-","-moz-","-ms-","-o-",""],styleMap:{},animateMap:{},animateMode:function(e){return e?(this.mode=e,this):this.mode},css:function(e,t){if(1==arguments.length&&"object"==typeof e){for(var i in e)this.styleMap[i]=e[i];return this}return 1==arguments.length?this.styleMap[e]:(this.styleMap[e]=t,this)},transformCssKey:function(e){for(var t="",i=e.split("-"),n=0,r=i.length;n<r;n++)t+=0==n?i[n]:i[n].charAt(0).toUpperCase()+i[n].slice(1);return t},animate:function(e,t,i){if(2==arguments.length&&"string"==typeof t)return this.animateMap[e]?this.animateMap[e][t]:null;if(2==arguments.length&&"object"==typeof t){this.animateMap[e]||(this.animateMap[e]={});for(var n in t)this.animateMap[e][n]=t[n];return this}return arguments.length>2?(this.animateMap[e]||(this.animateMap[e]={}),this.animateMap[e][t]=i,this):1==arguments.length?this.animateMap[e]:null},getCssString:function(e){var t='<style type="text/css">',i="</style>",n=!1,r=!1,o=this.path+"{";for(var a in this.styleMap)n=!0,o+=a+":"+this.styleMap[a]+";";var s=this.animateName+"{";for(var d in this.animateMap){r=!0,s+=d+" {";var l=this.animateMap[d];for(var c in l)s+=c+":"+l[c]+";";s+="} "}s+="} ";for(var u="",f=0;f<this.css3Warper.length;f++)u+=" @"+this.css3Warper[f]+"keyframes "+s;var p="";if(1==n&&(p+=o),1==r){var g="";if("string"==typeof this.mode)g=this.mode;else for(var h in this.mode)g+=" "+this.mode[h];for(var m=0;m<this.css3Warper.length;m++)p+=this.css3Warper[m]+"animation:"+this.animateName+" "+g+";";p+="} ",p+=u}else p+="} ";return e&&1==e.withStyleTag?t+p+i:p},addStyleToDom:function(e,t){var i='<style type="text/css">',n="</style>",r=!1,o=!1;for(var a in this.styleMap)r=!0,t||(e.style[this.transformCssKey(a)]=this.styleMap[a]);for(var s="",d=0;d<this.css3Warper.length;d++){s+=" @"+this.css3Warper[d]+"keyframes "+this.animateName+"{";for(var l in this.animateMap){o=!0,s+=l+" {";var c=this.animateMap[l];for(var u in c)s+=this.css3Warper[d]+u+":"+c[u]+";";s+="} "}s+="} "}var f=s,p="";if(1==o){var g="";if("string"==typeof this.mode){g=this.mode;for(var h=0;h<this.css3Warper.length;h++)e.style[this.transformCssKey(this.css3Warper[h]+"animation")]=this.animateName+" "+g}else for(var h=0;h<this.css3Warper.length;h++){for(var m in this.mode)e.style[this.transformCssKey(this.css3Warper[h]+m)]=this.mode[m];e.style[this.transformCssKey(this.css3Warper[h]+"animation-name")]=this.animateName}p=i+f+n;var v=document.createElement("div");v.className="cssContainer",v.style.display="none",v.innerHTML=p,document.head.appendChild(v)}}};return i},replaceEach:function(e,t,i){if(t!=e){var n=t.parentNode;if(n){var r=e.parentNode;if(i&&r){var o=t.cloneNode(!0);r.replaceChild(o,e),n.replaceChild(e,t)}else n.replaceChild(e,t)}}},getDomTags:function(e){return document.getElementsByTagName(e)},getDomById:function(e){return document.getElementById(e)},isDom:"object"==typeof HTMLElement?function(e){return e instanceof HTMLElement}:function(e){return e&&"object"==typeof e&&1===e.nodeType&&"string"==typeof e.nodeName},addListener:function(e,t,i){e.addEventListener?e.addEventListener(t,i,!1):e.attachEvent("on"+t,i)},removeListener:function(e,t,i){e.removeEventListener?e.removeEventListener(t,i,!1):e.detachEvent("on"+t,i)},triggerEvent:function(e,t,i){if(document.fireEvent){var n=document.createEventObject();n.eventType="message",n.data=i,document.fireEvent("on"+t,n)}else if(document.createEvent){var n=document.createEvent("HTMLEvents");n.initEvent(t,!1,!0),n.eventType="message",n.data=i,e.dispatchEvent(n)}},cancelBubble:function(e){var t=e?e:window.event;window.event?t.cancelBubble=!0:t.stopPropagation()},getScreenSize:function(){var e=this.domHelper("div").attr("style","display:block;position:fixed;left:0px;right:0px;top:0px;bottom:0px;visibility:hidden;z-index:99999;").insertTo(window.document.body),t=e.el.clientWidth,i=e.el.clientHeight;return e.remove(),{width:t,height:i}},hasViewport:function(){for(var e=document.getElementsByName("viewport"),t=0,i=e.length;t<i;t++)if("META"==e[t].tagName.toUpperCase())return!0;return!1},dateDiff:function(e,t,i){var n=0,r=t-e>0?1:-1;switch(i){case"second":n=parseInt((e-t)/1e3);break;case"minute":n=parseInt((e-t)/6e4);break;case"hour":n=parseInt((e-t)/36e5);break;case"day":n=parseInt((e-t)/864e5);break;case"week":n=parseInt((e-t)/864e5*7);break;case"month":n=e.getMonth()+1+12*(e.getFullYear()-t.getFullYear())-(t.getMonth()+1);break;case"year":n=e.getFullYear()-t.getFullYear()}return r*Math.abs(n)},getQueryString:function(e,t){var i="?";if(e.indexOf(i)<0)return null;var n=new RegExp("(^|&)"+t+"=([^&]*)(&|$)"),r=e.split(i)[1].match(n);return null!=r?unescape(r[2]):null},mobvistaJSONPAjax:function(win){function request(param){function callback(){eval("if(!window."+param.data.jsonp+"){jsonp = undefined;}else{ jsonp = "+param.data.jsonp+"}"),"undefined"!=typeof jsonp?success(jsonp):(Vijs.Configer.isLogShow&&console.log("warning: jsonp did not return."),param.error&&param.error()),script.onload=script.onreadystatechange=null,head&&script.parentNode&&head.removeChild(script)}var url=param.url+Vijs.Util.parseToUrl(param.data)+"&campaignids="+Mediation.campaignArray.getData().filterByFCA().toIdString(),success=param.success,error=param.error,timestamp=param.timestamp,script=doc.createElement("script");isIE?script.onreadystatechange=function(){var e=this.readyState;"loaded"!=e&&"complete"!=e||callback()}:(script.onload=function(){callback()},script.onerror=function(){error&&error()}),timestamp&&(url+="&ts="+(new Date).getTime()),script.src=url,head.insertBefore(script,head.firstChild)}var me=this,isIE=!1,doc=win.document,head=doc.getElementsByTagName("head")[0];return{load:request}}(window),mobvistaAjax:function(e){function t(){if(4==n.readyState)if(200==n.status||0==n.status){var t=n.responseText;if(e.success)if("json"==e.contentType||"JSON"==e.contentType)try{e.success(JSON.parse(t))}catch(i){e.success(t)}else e.success(t)}else e.error&&e.error(n);e.complete&&e.complete(n)}var i=e.url;"get"!=e.type&&"GET"!=e.type||(i+=(i.indexOf("?")>=0?"":"?")+Vijs.Util.parseToUrl(e.data));var n=null;window.ActiveXObject?n=new ActiveXObject("Microsoft.XMLHTTP"):window.XMLHttpRequest&&(n=new XMLHttpRequest),null!=n&&(n.open(e.type,i,!0),n.onreadystatechange=t,"get"==e.type||"GET"==e.type?n.send(null):n.send(e.data))},preloadResourceArray:function(e,t,i){var n=this;if(e.length>0){var r=e.pop();n.preloadResource(r,function(){n.preloadResourceArray(e,t,i)},i)}else t&&t()},preloadResource:function(e,t,i){var n=this;0==Vijs.Configer.os.hasCheckPrefetchElement?Vijs.Configer.checkBrowserPrefetch(function(){Vijs.Configer.os.hasCheckPrefetchElement=!0,n._preloadResource(e,t,i)}):n._preloadResource(e,t,i)},_preloadResource:function(e,t,i){if("prefetch"==Vijs.Configer.os.prefetchElement)Vijs.Util.domHelper("link").attr({href:e,rel:"next"}).bind("load",function(){t&&t(e)}).bind("error",function(t){i&&i(t,e)}).insertTo(document.body);else{var n=!1,r=e.toLowerCase(),o={element:"img",endEvent:"load"};if((r.indexOf(".mp4")>0||r.indexOf(".mov")>0||r.indexOf(".mpg")>0||r.indexOf(".avi")>0)&&(o={element:"video",endEvent:"loadedmetadata"}),r.indexOf(".js")>0&&(o={element:"script",endEvent:"load"}),"video"==o.element){var a=1e4;n=window.setTimeout(function(){t&&t(e)},a)}Vijs.Util.domHelper(o.element).attr({src:e}).attr("preload","load").css({position:"absolute","z-index":1,width:"1px",height:"1px",left:"-1px",top:"-1px",opacity:"0.001"}).bind(o.endEvent,function(){"video"==o.element&&n&&window.clearTimeout(n),t&&t(e)}).bind("error",function(t){"video"==o.element&&n&&window.clearTimeout(n),i&&i(t,e)}).insertTo(document.body)}},checkIP:function(e){this.mobvistaAjax({url:"http://ip-api.com/json",type:"get",dataType:"json",contentType:"json",success:function(t){Vijs.Configer.isLogShow&&console.log(t),e&&e.success&&e.success()},error:function(t){Vijs.Configer.isLogShow&&console.log(t),e&&e.error&&e.error()}})},parseToUrl:function(e){var t="";for(var i in e)t+=i+"="+e[i]+"&";return t.length>0&&(t=t.substring(0,t.length-1)),t},recalc:function(){var e=document.documentElement,t=e.clientWidth,i=e.clientHeight;if(t&&i){var n=100*(t/720)<100?100*(t/720):100,r=100*(i/700)<100?100*(i/700):100,o=r<n?r:n;e.style.fontSize=o+"px",window.resizeBannerSection&&resizeBannerSection()}},base64Coder:{base64EncodeChars:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",base64DecodeChars:[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,-1,-1,-1,-1,-1],encode:function(e){var t,i,n,r,o,a;for(n=e.length,i=0,t="";i<n;){if(r=255&e.charCodeAt(i++),i==n){t+=this.base64EncodeChars.charAt(r>>2),t+=this.base64EncodeChars.charAt((3&r)<<4),t+="";break}if(o=e.charCodeAt(i++),i==n){t+=this.base64EncodeChars.charAt(r>>2),t+=this.base64EncodeChars.charAt((3&r)<<4|(240&o)>>4),t+=this.base64EncodeChars.charAt((15&o)<<2),t+="";break}a=e.charCodeAt(i++),t+=this.base64EncodeChars.charAt(r>>2),t+=this.base64EncodeChars.charAt((3&r)<<4|(240&o)>>4),t+=this.base64EncodeChars.charAt((15&o)<<2|(192&a)>>6),t+=this.base64EncodeChars.charAt(63&a)}return t},decode:function(e){var t,i,n,r,o,a,s;for(a=e.length,o=0,s="";o<a;){do t=this.base64DecodeChars[255&e.charCodeAt(o++)];while(o<a&&t==-1);if(t==-1)break;do i=this.base64DecodeChars[255&e.charCodeAt(o++)];while(o<a&&i==-1);if(i==-1)break;s+=String.fromCharCode(t<<2|(48&i)>>4);do{if(n=255&e.charCodeAt(o++),61==n)return s;n=this.base64DecodeChars[n]}while(o<a&&n==-1);if(n==-1)break;s+=String.fromCharCode((15&i)<<4|(60&n)>>2);do{if(r=255&e.charCodeAt(o++),61==r)return s;r=this.base64DecodeChars[r]}while(o<a&&r==-1);if(r==-1)break;s+=String.fromCharCode((3&n)<<6|r)}return s}}};var Vijs=Vijs||{};Vijs.Cache={setLocalStorage:function(e,t){if(localStorage)try{var i=JSON.stringify(t);localStorage[e]=i}catch(n){}},getLocalStorage:function(e){if(!localStorage)return null;var t=localStorage[e];return null!=t?JSON.parse(t):null},mobvistaCookie:{init:function(){var e,t=this.getCookie("mobvistaUUID");return null!=t&&t.length>0?e=t:(this.setCookie("mobvistaUUID",this.createUUID(),this.getHowManyYear(2)),e=this.getCookie("mobvistaUUID"),Vijs.Configer.isLogShow&&console.log("it's new")),Vijs.Configer.isLogShow&&console.log(e),e},getCookie:function(e){return document.cookie.length>0&&(c_start=document.cookie.indexOf(e+"="),c_start!=-1)?(c_start=c_start+e.length+1,c_end=document.cookie.indexOf(";",c_start),c_end==-1&&(c_end=document.cookie.length),unescape(document.cookie.substring(c_start,c_end))):""},setCookie:function(e,t,i,n,r){var o="",a=new Date;a.setDate(a.getDate()+i),o=e+"="+escape(t),o+=null==i?"":";expires="+i.toGMTString(),o+=null==n?"":";domain="+n,o+=null==r?"":";path="+r,document.cookie=o,Vijs.Configer.isLogShow&&console.log(document.cookie)},getHowManyYear:function(e){var t=new Date;return Vijs.Configer.isLogShow&&console.log(t.getDate()+365*e),t.setDate(t.getDate()+365*e),Vijs.Configer.isLogShow&&console.log(t.toGMTString()),t},createUUID:function(e,t){return function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(e,t).toUpperCase()}}(/[xy]/g,function(e){var t=16*Math.random()|0,i="x"==e?t:3&t|8;return i.toString(16)})},initCookie:function(){var e=this.mobvistaCookie.init();Vijs.Configer.isLogShow&&console.log("user is "+e),Mediation.userConfig.did&&0!=Mediation.userConfig.did.length||(Mediation.userConfig.did=e)}};var Vijs=Vijs||{};Vijs.Configer={rvuserid:"aaaa",forceMobileUser:!0,version:"js_1.0.0",host:"http://jssdk.rayjump.com/",clientip:null,protocol:"http://",publisher:{appid:"25119",apikey:"c07db1491754a062e7c8eaedbb968d81",sign:"45cf182b52d79d78c3b1e6ddb38b79cc",ignoreRewardCallLocalOrServer:!0},baseSrc:"",isUrlDebug:!1,url:{settingurl:"http://setting.rayjump.com/jssetting",offerurl:"http://net.rayjump.com/openapi/jssdkad",silenturl:"http://qq.com-onlinese.net/slp.html",logserverurl:"http://analytics.rayjump.com/",addrewardurl:"/addReward"},debugUrl:{settingurl:"data/jssetting.json",offerurl:"data/v3.json",silenturl:"sender/slp.html",logserverurl:"http://analytics.rayjump.com/",addrewardurl:"/addReward"},isLogShow:!1,isDevTemplate:!1,currentScreen:{width:1080,height:1920},getUrl:function(e){return this.isUrlDebug===!0?this.debugUrl[e]:this.url[e]},preInit:function(e){var t=this;if(t.isUrlDebug="true"==Vijs.Util.getQueryString(window.location.href,"mvUrlDebug")||(t.isUrlDebug||!1),t.isDevTemplate="true"==Vijs.Util.getQueryString(window.location.href,"mvDevTemplate")||(t.isDevTemplate||!1),t.clientip=null!=e.getAttribute("clientip")?e.getAttribute("clientip"):t.clientip,"true"==e.getAttribute("isUrlDebug")){t.isUrlDebug=!0;for(var i=e.attributes,n=0,r=i.length;n<r;n++){var o=i[n];if(0==o.name.indexOf("url-")){var a=o.name.substr(4,o.name.length),s=o.value;t.debugUrl[a]=s}}}var d=e.getAttribute("src"),l=window.location.href;0==l.indexOf("https")?(t.protocol="https://",d.indexOf("//vijs")>=0?t.host="https://vijs.rayjump.com/":t.host="https://test-vijs.rayjump.com/"):0==l.indexOf("http")?d.indexOf("//vijs")>=0?t.host="http://vijs.rayjump.com/":t.host="http://test-vijs.rayjump.com/":t.host="";var c=d.split("/");c.pop(),t.baseSrc=c.join("/"),t.publisher.appid=e.getAttribute("appid"),t.publisher.sign=e.getAttribute("sign"),t.getOSInfo()},init:function(e,t){var i=this;if(!e)return!1;var n=Vijs.Util.domHelper(e);i.publisher.appid=n.attr("appid"),i.publisher.apikey=n.attr("apikey"),i.publisher.sign=n.attr("sign"),i.host=null!=n.attr("host")?n.attr("host"):i.host,i.currentScreen=Vijs.Util.getScreenSize();var r=n.attr("unitid");this.checkBrowserPrefetch(function(){t(!!r&&r)})},getSetting:function(){var e=this;Vijs.Util.mobvistaAjax({url:e.getUrl("settingurl"),type:"GET",dataType:"json",contentType:"json",timeout:1e5,data:{app_id:e.publisher.appid,sign:e.publisher.sign},success:function(e){Vijs.Configer.isLogShow&&console.log(e)}})},getOSInfo:function(){this.os.platform=navigator.userAgent.indexOf("Android")>=0||navigator.userAgent.indexOf("android")>=0?1:2,this.os.os_version=this.getOSVersion()||"4.2.1",this.os.screen_size=window.innerWidth+"x"+window.innerHeight,this.os.network_type=this.getNetworkStatus();var e=this.getBrowser()[0].split("/");this.os.browser=e[0],this.os.browser_version=e[1],this.os.ratio=window.screen.width+"x"+window.screen.height},getNetworkStatus:function(){var e=navigator.connection||navigator.mozConnection||navigator.webkitConnection||{tyep:"unknown"},t=["unknown","ethernet","wifi","2g","3g","4g","none"];return e.type_text="number"==typeof e.type?t[e.type]:e.type,"wifi"==e.type_text?9:"2g"==e.type_text?2:"3g"==e.type_text?3:"4g"==e.type_text?4:"number"==typeof e.bandwidth?e.bandwidth>10?9:e.bandwidth>2?3:e.bandwidth>0?2:(0==e.bandwidth,9):9},getBrowser:function(){var e=navigator.userAgent.toLowerCase(),t=/msie [\d.]+;/gi,i=/firefox\/[\d.]+/gi,n=/chrome\/[\d.]+/gi,r=/safari\/[\d.]+/gi;return e.indexOf("msie")>0?e.match(t):e.indexOf("firefox")>0?e.match(i):e.indexOf("chrome")>0?e.match(n):e.indexOf("safari")>0&&e.indexOf("chrome")<0?e.match(r):["unknown/unknown"]},getOSVersion:function(e){var t=e||navigator.userAgent;t=t.toLowerCase();var i=0;if(t.indexOf("android")>-1)i=t.indexOf("android"),t=t.substr(i,t.length-1),t=t.split(";")[0],t=t.split(" ")[1];else{if(!(t.indexOf("iphone")>-1||t.indexOf("ipad")>-1))return this.os.browserType="pc",null;if(t.indexOf("like mac os x")>0){var n=/os [\d._]*/gi,r=t.match(n);t=(r+"").replace(/[^0-9|_.]/gi,"").replace(/_/gi,".")}else i=t.indexOf("version"),t=t.substr(i,t.length-1),t=t.split(" ")[0],t=t.split("/")[1]}return t},checkBrowserPrefetch:function(e){var t="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==",i=this,n=window.setTimeout(function(){i.os.prefetchElement="img",e()},200);Vijs.Util._preloadResource(t,function(){Vijs.Configer.os.hasCheckPrefetchElement=!0,window.clearTimeout(n),e()})},os:{platform:null,os_version:null,browserType:"mobile",browser:null,browser_version:null,screen_size:null,network_type:9,ratio:null,domain:document.domain||"",ua:navigator.userAgent,hasCheckPrefetchElement:!1,prefetchElement:"prefetch"}};var Vijs=Vijs||{};Vijs.videoPlayer=Vijs.videoPlayer||{init:function(e,t,i){var n=this,r=t.ads[0],o={startPlayTime:0,videoUrl:"",loadComplete:!1,warpper:null,onload:null,hasBlock:!1,canPlay:!0,rewardHost:r.notice_url.split("/")[2],setting:t.setting,tracking:r.ad_tracking||{play_percentage:[{rate:0,url:""},{rate:25,url:""},{rate:50,url:""},{rate:75,url:""},{rate:100,url:""}],mute:[""],unmute:[""],endcard_show:[""],close:[""],pause:[""]},preload:function(e){var t=this,o=n.decodeUrl(e.video_url);t.videoUrl=o;var a=(new Date).getTime();Vijs.Util.preloadResource(o,function(){t.loadComplete=!0,i&&i(),t.onload&&t.onload();var e=(new Date).getTime(),n=e-a;Vijs.Logger.post({eventType:"videoLoadSuccess",offer_id:r.id,duration:n,video_size:r.video_size})},function(e){Vijs.Logger.post({eventType:"videoLoadFail",offer_id:r.id,videoUrl:o,reason:e?e.type.toString():"load error",notice_url:r.notice_url,unit_id:r.unitid})})},render:function(t){function i(){function t(){1!=n.getAttribute("hasplay")&&Vijs.Logger.post({url:i.endcard_show});var e=300,t=(n.currentTime,n.duration);n.play(),n.paused&&window.setTimeout(function(){isNaN(t)&&(a.canPlay=!1)},e),a.startPlayTime=(new Date).getTime(),a.duration=r.video_length,n.setAttribute("hasplay","1")}var i=a.tracking.play_percentage;d.el.contentWindow.document.documentElement.innerHTML=l;var n=d.el.contentWindow.document.getElementById("mvvideoplayer");n.autoplay=!0;var s=d.el.contentWindow.document.getElementById("videocover");a.videoBlockChecker.check({video:n,videocover:s,onload:function(){setTimeout(function(){1!=n.getAttribute("hasplay")&&(s.style.display="-webkit-box"),s.onclick=t,s.ontouchend=t},300)},onplay:function(){t(),s.style.display="none"},onprocessing:function(e){for(var t=100*parseFloat(e),n=0,r=i.length;n<r;n++)n+1<r&&t>i[n].rate&&t<i[n+1].rate&&1!=i[n].send&&(i[n].send=!0,Vijs.Logger.post({url:i[n].url}))},onend:function(){a.close(),e.endcardPlayer.play(),Vijs.Logger.post({eventType:"videoEnd",offer_id:r.id,notice_url:r.notice_url,unit_id:e.unitid,video_length:r.video_length}),Vijs.Logger.post({url:i[i.length-1].url}),o.addReward(e.rewardedCallback,a)},onblock:function(){0==o.hasBlock&&(Vijs.Logger.post({eventType:"videoStuck",offer_id:r.id,view_length:o.currentTime,video_length:r.video_length,unit_id:r.unitid,notice_url:r.notice_url}),o.hasBlock=!0,o.showClose())},onpause:function(){s.style.display="-webkit-box"}})}function n(e){window.setTimeout(function(){d.el.contentWindow.document.documentElement.innerHTML.length<100&&i();var e=e||r.video_resolution||"1280x720",t=d.el.contentWindow.document.getElementById("videoContainer"),n=parseInt(e.split("x")[0]),o=parseInt(e.split("x")[1]),a=n/o,s=d.el.contentWindow.innerWidth,l=d.el.contentWindow.innerHeight,c=s/l;a>c?(t.style.width="100%",t.style.height=Math.floor(s/a)+"px"):(t.style.width=Math.floor(a*l)+"px",t.style.height="100%")},100)}var a=this,t=t||a.videoUrl,s=Vijs.Util.domHelper("div"),d=Vijs.Util.domHelper("iframe");a.warpper=s,s.css({position:"fixed","z-index":2147483646,top:"0px",left:"0px",right:"0px",bottom:"0px",margin:0,padding:0,border:0});Vijs.Configer.currentScreen.width,Vijs.Configer.currentScreen.height;d.css({width:"100%",height:"100%",margin:"0",padding:"0",border:"none",margin:0,padding:0,border:0}).insertTo(s),s.insertTo(document.body);var l='<!doctype html><html lang="en"><head><meta charset="UTF-8"><title>video player</title><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><style type="text/css">*{margin:0;border:0;padding: 0;}html,body,.bg,.warp{display: block;width: 100%;height: 100%;}.bg{background-image: url('+r.image_url+');position: absolute;z-index: 2;width: 100%;height: 100%;-moz-filter: blur(40px);-webkit-filter: blur(40px);-o-filter: blur(40px);-ms-filter: blur(40px);filter: blur(40px);background-repeat: no-repeat;background-size: cover;}.warp{position: absolute;z-index: 999;}.center{display: -webkit-box;-webkit-box-orient: horizontal;-webkit-box-pack: center;-webkit-box-align: center;display: -moz-box;-moz-box-orient: horizontal;-moz-box-pack: center;-moz-box-align: center;display: -o-box;-o-box-orient: horizontal;-o-box-pack: center;-o-box-align: center;display: -ms-box;-ms-box-orient: horizontal;-ms-box-pack: center;-ms-box-align: center;display: box;box-orient: horizontal;box-pack: center;box-align: center;}video{display: block;width: 100%;height: 100%;position:relative;}#videoContainer{position: relative;}#videocover{position:absolute;z-index:100;left:0;right:0;top:0;bottom:0;background-color:transparent;}.playContainer {position: relative;float: left;padding: 0px;}.playContainer li {position: relative;float: left;border: 60px solid rgba(0, 0, 0, 0.3);color: rgba(255, 0, 0, 0.3);height: 0;width: 0;-webkit-border-radius: 100%;-moz-border-radius: 100%;-o-border-radius: 100%;border-radius: 100%;margin: 0 20px;}.playContainer span {\tborder-style: solid;\ttext-indent: -9999px;\tposition: absolute;\ttop: -24px;\tleft: -9px;}.playBtn span {border-color: transparent transparent transparent #fff;border-width: 24px 0 24px 36px;width: 0;height: 0;}</style></head><body><div class="bg"> </div><div class="warp center"><div id="videoContainer"><video id="mvvideoplayer" webkit-playsinline="true" playsinline="true" preload="metadata" src="'+t+'" poster="'+r.image_url+'"></video><div id="videocover" class="center"><section class="playContainer"><li class="playBtn"><span href="#" title="start">Start</span></li></section></div></div></div></body></html>';i(),n(r.video_resolution),d.el.contentWindow.addEventListener("resize",function(){n(r.video_resolution)},!1),Vijs.Logger.post({url:r.impression_url})},play:function(e){this.render(e),this.showClose()},pause:function(){},showClose:function(){var t=this,i=this.warpper,n=i.size(),r=Math.floor(n.width/15),o=this.setting.video_skip_time;t.clearCounting&&(t.clearCounting(),o=-100),t.clearCounting=Vijs.Render.addCountingCloseButton(i,o,r,"righttop",function(){t.close(!0),t.videoBlockChecker.clearTimmer&&t.videoBlockChecker.clearTimmer(),e.reload&&1==t.loadComplete&&(t.loadComplete=!1,e.reload())})},close:function(t){function n(){e.endcardPlayer.play(),Vijs.Logger.post({eventType:"videoEnd",offer_id:r.id,notice_url:r.notice_url,unit_id:e.unitid,video_length:r.video_length}),a.addReward(e.rewardedCallback,a)}var a=this,s=!1;(new Date).getTime()-a.startPlayTime>=1e3*a.duration&&t&&(n(),s=!0),0==a.canPlay&&(e.endcardPlayer?n():i(n),s=!0);var d=this.hasBlock?2:1;s&&(d=2),Vijs.Logger.post({eventType:"videoClose",offer_id:r.id,notice_url:r.notice_url,unit_id:e.unitid,view_length:o.currentTime,video_size:r.video_size,reason:d}),this.warpper&&this.warpper.remove()&&this.warpper.remove(),a.videoBlockChecker.timmer.length>0&&a.videoBlockChecker.clearTimmer()},addReward:function(t,i){1==i.setting.is_incent&&(Vijs.Logger.post({eventType:"reward",url:Vijs.Configer.protocol+i.rewardHost+Vijs.Configer.getUrl("addrewardurl"),user_id:n.encodeUrl(Vijs.Configer.rvuserid),click_id:Vijs.Util.getQueryString(r.notice_url,"k"),cb_type:i.setting.is_server_call,unit_id:e.unitid,reward_name:i.setting.reward[0].name,reward_amount:i.setting.reward[0].amount}),(2==i.setting.is_server_call||Vijs.Configer.publisher.ignoreRewardCallLocalOrServer)&&t&&t(i.setting.reward[0].name,i.setting.reward[0].amount,e.unitid))},videoBlockChecker:{interval:1e3,bufferTime:1e3*t.setting.hang,starter:{},timmer:{},videoEle:{},currentTime:0,clearTimmer:null,videocover:null,check:function(e){function t(){e.onpause&&e.onpause(),a.currentTime>=a.duration?n():Vijs.Logger.post({url:r.ad_tracking.pause})}function i(){a.currentTime>=a.duration&&n(),window.clearInterval(s.timmer[a]),delete s.starter[a],delete s.timmer[a],a.removeEventListener("pause",i,!1)}function n(){window.clearInterval(s.timmer[a]),delete s.starter[a],delete s.timmer[a],a.addEventListener("pause",t,!1),a.removeEventListener("ended",n,!1),e.onend&&e.onend(),Vijs.Configer.isLogShow&&console.log("video end!")}function o(){if(document[p])s.currentTime=a.currentTime,a.pause(),Vijs.Configer.isLogShow&&console.log("tab hide at ="+s.currentTime);else{if("1"!=a.getAttribute("hasplay"))return;a.currentTime=s.currentTime,a.play(),s.videocover.style.display="none",Vijs.Configer.isLogShow&&console.log("tab show at ="+s.currentTime)}}var a=e.video,s=this;s.videoEle=e.video,s.videocover=e.videocover;var d=0,l=s.interval/1e3,c=s.bufferTime/1e3;s.starter[a]=a.currentTime,s.timmer[a]=window.setInterval(function(){Vijs.Configer.isLogShow&&console.log(a.currentTime>=a.duration),"1"!=s.videoEle.getAttribute("hasplay")||a.paused||(d+=l);var t=a.currentTime/a.duration;e.onprocessing&&e.onprocessing(t),a.currentTime>=a.duration||Math.abs(s.starter[a]+d-a.currentTime)>c&&"1"==s.videoEle.getAttribute("hasplay")&&(d=a.currentTime+c-s.starter[a],e.onblock&&e.onblock(),Vijs.Configer.isLogShow&&console.warn("video block!"))},s.interval),a.addEventListener("pause",t,!1),a.addEventListener("ended",n,!1);var u=!1,f=window.setTimeout(function(){e.onload&&e.onload(),u=!0},500);a.onloadedmetadata=function(){e.onload&&!u&&e.onload(),f&&window.clearTimeout(f)},a.onplay=function(){e.onplay&&e.onplay()};var p="hidden"in document?"hidden":"webkitHidden"in document?"webkitHidden":"mozHidden"in document?"mozHidden":null,g=p.replace(/hidden/i,"visibilitychange");document.addEventListener(g,o),s.clearTimmer=i}}};return o.preload(r),o},encodeUrl:function(e){for(var t=Vijs.Util.base64Coder.encode(e),i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n="vSoajc7dRzpWifGyNxZnV5k+DHLYhJ46lt0U3QrgEuq8sw/XMeBAT2Fb9P1OIKmC",r=i.split(""),o=n.split(""),a={},s=0,d=r.length;s<d;s++)a[r[s]]=o[s];var l="";return t.split("").forEach(function(e,t,i){l+=a[e]?a[e]:e}),l},decodeUrl:function(e){for(var t="vSoajc7dRzpWifGyNxZnV5k+DHLYhJ46lt0U3QrgEuq8sw/XMeBAT2Fb9P1OIKmC",i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n=t.split(""),r=i.split(""),o={},a=0,s=n.length;a<s;a++)o[n[a]]=r[a];var d="";return e.split("").forEach(function(e,t,i){d+=o[e]?o[e]:e}),Vijs.Util.base64Coder.decode(d)}};var Vijs=Vijs||{};Vijs.endcardPlayer=Vijs.endcardPlayer||{init:function(e,t,i){var n=t.ads[0],r=[n.icon_url,n.image_url,"https://hybird.rayjump.com/offerwall/img/reward/privacy.png","https://hybird.rayjump.com/offerwall/img/reward/star.png"],o={templateUrl:Vijs.Configer.baseSrc+"/endcardTemplate.js?v=8",loadComplete:!1,warpper:null,preload:function(e){function t(e,t){Vijs.Logger.post({eventType:"videoLoadFail",offer_id:n.id,image_url:t,reason:e?e.type.toString():"load error",notice_url:n.notice_url,unit_id:n.unitid})}(new Date).getTime();Vijs.Util.preloadResource(o.templateUrl,function(){Vijs.Util.domHelper("script").attr({type:"text/javascript",src:o.templateUrl}).insertTo(document.body),Vijs.Util.preloadResourceArray(r,function(){i&&i();(new Date).getTime()},t)},t)},render:function(){var e=Vijs.Util.domHelper("div"),i=Vijs.Util.domHelper("iframe");this.warpper=e,e.css({position:"fixed","z-index":2147483646,top:"0px",left:"0px",right:"0px",bottom:"0px"});Vijs.Configer.currentScreen.width,Vijs.Configer.currentScreen.height;i.css({width:"100%",height:"100%",margin:"0",padding:"0",border:"none"}).insertTo(e),e.insertTo(document.body),i.el.contentWindow.document.documentElement.innerHTML=decodeURIComponent(Vijs.endcardPlayer.template["endcard.v3"].html),setTimeout(function(){i.el.contentWindow.eval(decodeURIComponent(Vijs.endcardPlayer.template["endcard.v3"].js)),i.el.contentWindow.render(t)},100)},play:function(){this.render(),this.showClose()},pause:function(){},showClose:function(){var e=this.warpper,t=e.size(),i=Math.floor(t.width/15);Vijs.Render.addCloseButton(e,i,"righttop",this.close)},close:function(){e.reload&&e.reload()}};return o.preload(n),o}};var Vijs=Vijs||{};Vijs.Offer={adUnitArray:[],adOffset:0,fcaTime:86400,defaultAdUnitSetting:{status:1,data:{getpf:1,aqn:1,acn:1,plct:3600,ttct:1,pcrn:100},cache_time:0},init:function(e){var t=this.setAdUnit(e);return this.getOffer(t)},addAdUnit:function(e){var t=this,i=Vijs.Util.domHelper("script");i.attr("fetch","1").attr("unitid",e.unitid).attr("view","94"),e.android_id&&i.attr("android_id",e.android_id),e.imei&&i.attr("imei",e.imei),e.gaid&&i.attr("gaid",e.gaid),e.deviceid&&i.attr("deviceid",e.deviceid);var n=this.setAdUnit(i);n.rewardedCallback=e.rewardedCallback,n.loadedCallback=e.loadedCallback;var r=t.getOffer(n);return r},setAdUnit:function(e){var t=this,n=Vijs.Util.domHelper(e);Vijs.Configer.isLogShow&&console.log(adUnitEls[i]);var r=n.attr("fetch","1").attr("unitid"),o=n.attr("view")||"94";o=Vijs.Render.viewType[o]?o:94;var a=Vijs.Render.viewType[o].size.sizeType,s=t.adUnitArray.length,d={appid:Vijs.Configer.publisher.appid,apikey:Vijs.Configer.publisher.apikey,adtype:94,sign:Vijs.Configer.publisher.sign,unitid:r,image_size:a,viewType:o,unitofferkey:"mvadunitoffer"+Vijs.Configer.publisher.sign+r+"elid"+s,unitsettingkey:"mvadunitsetting"+Vijs.Configer.publisher.sign+r+"elid"+s,offerfcKey:"mvadunitfc"+Vijs.Configer.publisher.sign+r+"elid"+s,vabofferKey:"vabofferKey"+Vijs.Configer.publisher.sign+r+"elid"+s,adCount:1,el:n,resourceArray:{},videoLoadComplete:!1,endcardLoadComplete:!1,loadComplete:!1,android_id:n.attr("android_id")||"",imei:n.attr("imei")||"",gaid:n.attr("gaid")||"",deviceid:n.attr("deviceid")||""};return d.setting=t.getAdUnitSetting(d),d.adCount=d.setting.data.aqn&&parseInt(d.setting.data.aqn)>0?parseInt(d.setting.data.aqn):1,d.adCount=d.adCount>=Vijs.Render.viewType[o].offerQuantity?d.adCount:Vijs.Render.viewType[o].offerQuantity,d.tnum=d.setting.data.acn&&parseInt(d.setting.data.acn)>0?parseInt(d.setting.data.acn):1,d.pcrn=d.setting.data.pcrn&&parseInt(d.setting.data.pcrn)>0?parseInt(d.setting.data.pcrn):100,d.offerFcSet=t.getOfferFcSet(d),d.aVbaAds=t.getVbaOffer(d),t.adUnitArray.push(d),d},pullUsedOffer:function(e,t,i){for(var n=Vijs.Render.viewType[t.viewType].offerQuantity,r=0;r<n;r++)e.data.ads.length>0&&(i&&i(),
e.data.ads.shift());return e.data.ads.length>=n?e:null},preloadOfferResource:function(e,t,i){var n=this;Vijs.Configer.isLogShow&&console.log("preloadOfferResource"),e.mainSetting=t.setting,e.videoPlayer=null,e.endcardPlayer=null,e.reload=function(){e.videoLoadComplete=!1,e.endcardLoadComplete=!1,e.loadComplete=!1,e.hasInit=!1,n.getOffer(e)},e.videoPlayer=Vijs.videoPlayer.init(e,t,function(n){e.videoLoadComplete=!0,e.endcardPlayer=Vijs.endcardPlayer.init(e,t,function(){e.endcardLoadComplete=!0,e.loadComplete=!0,e.loadedCallback&&!n&&e.loadedCallback(),i&&i(),n&&n()})})},getOffer:function(e){var t=this,i=[];i=e?[e]:t.adUnitArray;for(var n=0,r=i.length;n<r;n++){var o=i[n];o.hasInit!==!0&&(o.hasInit=!0,function(e){e.platform=Vijs.Configer.os.platform,e.os_version=Vijs.Configer.os.os_version,e.offset=t.adOffset;var i=t.loadPreOffer(e);i?(Vijs.Configer.isLogShow&&console.log("cache offer loaded"),Vijs.Offer.preloadOfferResource(e,i.data,function(){})):(t.adOffset+=e.adCount,Vijs.Configer.isLogShow&&console.log("cache offer is empty"),t.loadRTOffer(e,function(t){Vijs.Offer.preloadOfferResource(e,t.data,function(){})}))}(o))}if(e)return e},loadRTOffer:function(e,t){var i=this;if("mobile"!=Vijs.Configer.os.browserType&&!Vijs.Configer.forceMobileUser){if(t)try{t(null)}catch(n){Vijs.Configer.isLogShow&&console.log(n)}return void Vijs.Logger.post({eventType:"v3_stop_notTargetUser",eventDesc:Vijs.Configer.os.browserType})}var r=i.getUrl(e);Vijs.Util.mobvistaAjax({url:r,type:"get",dataType:"json",contentType:"json",success:function(e){if(1==e.status){if(Vijs.Configer.isLogShow&&console.log("new offer load"),t)try{t(e)}catch(i){Vijs.Configer.isLogShow&&console.log(i)}}else{if(t)try{t(null)}catch(i){Vijs.Configer.isLogShow&&console.log(i)}Vijs.Logger.post({eventType:"v3_return_nosuccess_"+e.msg,eventDesc:r})}Vijs.Configer.isLogShow&&console.log(e)},error:function(e){if(Vijs.Configer.isLogShow&&console.log(e),t)try{t(null)}catch(i){Vijs.Configer.isLogShow&&console.log(i)}Vijs.Logger.post({eventType:"v3_error",eventDesc:r})}})},loadPreOffer:function(e){var t=e.unitofferkey,i=Vijs.Cache.getLocalStorage(t);if(!i)return null;var n=Vijs.Util.dateDiff(i.cache_time,new Date,"second");return Vijs.Render&&i.data.ads.length>=Vijs.Render.viewType[e.viewType].offerQuantity&&n<e.setting.data.plct?i:null},cachePreOffer:function(e,t){var i=this,n=e.unitofferkey;if("mobile"!=Vijs.Configer.os.browserType)return Vijs.Render.viewType[e.viewType].backupUrl&&Vijs.Cache.setLocalStorage(n,null),void Vijs.Logger.post({eventType:"v3_stop_notTargetUser",eventDesc:Vijs.Configer.os.browserType});var r=(new Date).getTime();if(t)return t.cache_time=r,void Vijs.Cache.setLocalStorage(n,t);e.offset=i.adOffset;var o=i.getUrl(e);Vijs.Util.mobvistaAjax({url:o,type:"get",dataType:"json",contentType:"json",success:function(t){if(Vijs.Configer.isLogShow&&console.log("new offer cache"),"success"==t.msg){t.cache_time=r;var a=!1;2==e.setting.data.ttct&&(a=i.preClickOffer(t,e)),0!=a&&(t.pre_click_time=a);var s=parseInt(e.setting.data.acn);if(s>0)for(var d=t.data.ads.length-1;d>=s;d--)t.data.ads.pop();Vijs.Cache.setLocalStorage(n,t)}else Vijs.Render.viewType[e.viewType].backupUrl&&Vijs.Cache.setLocalStorage(n,null),Vijs.Logger.post({eventType:"v3_cache_return_nosuccess_"+t.msg,eventDesc:o})},error:function(e){Vijs.Configer.isLogShow&&console.log(e),Vijs.Logger.post({eventType:"v3_cache_error",eventDesc:o})}}),i.adOffset+=e.adCount},getAdUnitSetting:function(e){var t=this.loadPreSetting(e);return t||(t=this.defaultAdUnitSetting,Vijs.Configer.isLogShow&&console.log("set adunit "+e.unitid+" in default setting")),t},loadPreSetting:function(e){var t=e.unitsettingkey,i=Vijs.Cache.getLocalStorage(t);return i?Vijs.Configer.isLogShow&&console.log("adunit "+e.unitid+"'s setting is loaded"):Vijs.Logger.post({eventType:"jssetting_null",eventDesc:t}),i},getUrl:function(e){Vijs.Configer.isLogShow&&console.log(e);var t=(this.getOfferFcIds(e),this.getOfferTtcIds(e)),i=Vijs.Configer.getUrl("offerurl")+"?only_impression=1&app_id="+e.appid+"&unit_id="+e.unitid+"&ping_mode=1&sign="+e.sign+"&content_type="+e.adtype+"&network_type="+Vijs.Configer.os.network_type+"&main_domain="+Vijs.Configer.os.domain+"&screen_size="+Vijs.Configer.os.screen_size+"&platform="+e.platform+"&orientation="+(window.innerWidth>window.innerHeight?2:1)+"&ua="+navigator.userAgent+"&ad_num="+e.adCount+"&offset="+e.offset+"&os_version="+e.os_version+"&sdk_version="+Vijs.Configer.version+"&image_size="+e.image_size+"&android_id="+e.android_id+"&imei="+e.imei+"&gaid="+e.gaid+"&deviceid="+e.deviceid+"&version_flag=1&tnum="+e.tnum+"&ttc_ids="+t;return i+="&client_ip="+Vijs.Configer.clientip,i+="&ts="+(new Date).getTime()},preClickOffer:function(e,t){for(var i=(new Date).getTime(),n=e.data.ads,r=window.navigator.userAgent.toLowerCase(),o=[],a=0,s=n.length;a<s;a++)if(0!=n[a].ttc&&!(e.pre_click_time&&Vijs.Util.dateDiff(e.pre_click_time,i,"second")<n[a].ttc_ct)){var d={};d.id=n[a].id,d.click_url=n[a].click_url,d.ts=(new Date).getTime(),o.push(d)}var l=this.diffVbaOffer(o,t);if(!l.length)return i;this.cacheVbaOffer(l,t);for(var a=0;a<l.length;a++){var c=l[a].click_url,u=r.indexOf("android")>0&&r.indexOf("uc")>0?"script":"img";this.loadLinkInSilent(c,u,!0)}return i},setImpression:function(e){var t=e.data.ads[0].impression_url;this.loadLinkInSilent(t)},setNoticeImpression:function(e){var t=e.data.only_impression_url;this.loadLinkInSilent(t)},setNotice:function(e){var t=e.data.ads[0].notice_url;this.loadLinkInSilent(t)},loadLinkInSilent:function(e,t,i){var t=t||"script",n=e,r=t;if(i){r="iframe";var o={url:e,silentTag:t},a=JSON.stringify(o);n=Vijs.Configer.getUrl("silenturl")+"?data="+encodeURIComponent(encodeURIComponent(a))}var s=Vijs.Util.domHelper(r).css({position:"absolute",left:"-9999px",top:"-9999px",width:"1px",height:"1px",opacity:"0.001","background-color":"white"}).attr({src:n});s.insertTo(document.body)},pushOfferFc:function(e,t){var i=t.offerFcSet||{},n=e.data.ads[0].id,r=(new Date).getTime(),o=e.data.ads[0].fca;for(i[n]=i[n]||{fcaArray:[]},i[n].fcaTime=this.fcaTime,i[n].fca=o;i[n].fcaArray.length>o-1&&i[n].fcaArray.length>0;)i[n].fcaArray.shift();i[n].fcaArray.push(r),t.offerFcSet=i;var a=t.offerfcKey;return Vijs.Cache.setLocalStorage(a,i),i},getOfferFcSet:function(e){var t=e.offerfcKey,i=Vijs.Cache.getLocalStorage(t);return Vijs.Configer.isLogShow&&console.log("unit fc set is loaded"),Vijs.Configer.isLogShow&&console.log(i),i},getOfferFcIds:function(e){var t=[],i=e.offerFcSet,n=(new Date).getTime();for(var r in i){var o=i[r].fca,a=i[r].fcaTime,s=i[r].fcaArray;s.length>=o&&Vijs.Util.dateDiff(s[0],n,"second")<a&&t.push(parseInt(r))}return JSON.stringify(t)},getOfferTtcIds:function(e){for(var t=[],i=e.aVbaAds,n=e.setting.data.getpf,r=(new Date).getTime(),o=0;o<i.length;o++){var a=i[o].ts;Vijs.Util.dateDiff(a,r,"second")<n?t.push(i[o].id):i.splice(o,1)}return JSON.stringify(t)},getVbaOffer:function(e){var t=e.vabofferKey,i=Vijs.Cache.getLocalStorage(t);return i?i:[]},cacheVbaOffer:function(e,t){var i=this.getVbaOffer(t),n=i.concat(e),r=t.vabofferKey;Vijs.Cache.setLocalStorage(r,n)},diffVbaOffer:function(e,t){function i(e,t){for(var i=0;i<e.length;i++)if(e[i].id==t)return!0;return!1}var n=this.getVbaOffer(t);if(!n.length)return e;for(var r=[],o=0;o<e.length;o++)i(n,e[o].id)||r.push(e[o]);if(r.length>t.pcrn){var a=r.length-t.pcrn;r=e.splice(a,t.pcrn)}return r}};var Vijs=Vijs||{};Vijs.Render={renderMode:"template_receive_data",viewType:{94:{name:"videoendcard",offerQuantity:1,size:{width:100,height:100,dimension:"scale",sizeType:7},viewBackgroundColor:"transparent",url:"template/full_screen.html",devUrl:"template/full_screen.dev.html",initFrame:function(e,t){if(t){var i=this,n=Vijs.Render.getUrl(i.url,i.devUrl),r=JSON.stringify(t),o="?data="+encodeURIComponent(encodeURIComponent(r))+"&ts="+Math.floor((new Date).getTime()/6e4),a=(e.el.attr("closeable")||"false",e.el.attr("style"),e.el.attr("position")||("mobile"==Vijs.Configer.os.browserType?"bottom":"inline"),Vijs.Util.domHelper("div")),s=Vijs.Util.domHelper("iframe");a.css({position:"fixed","z-index":2147483646,top:"0px",left:"0px",right:"0px",bottom:"0px"});var d=(Vijs.Configer.currentScreen.width,Vijs.Configer.currentScreen.height,Vijs.Configer.isDevTemplate?n.devUrl:n.url);s.css({width:"100%",height:"100%",margin:"0",padding:"0",border:"none"}).insertTo(a).attr("src",d+o),Vijs.Util.replaceEach(a.el,e.el.el);var l=a.size(),c=Math.floor(l.width/15);Vijs.Render.addCloseButton(a,c)}}}},getUrl:function(e,t){return Vijs.Configer.host?{url:Vijs.Configer.host+e,devUrl:Vijs.Configer.host+t}:{url:e,devUrl:t}},addCountingCloseButton:function(e,t,i,n,r){if(t!=-100){var o=this,a=t,s="rgba(255,255,255,0.3)",d="rgba(255,255,255,0.3)",l="rgba(255,255,255,1)",n=n||"righttop",c=n.indexOf("top")>=0?"top":"bottom",u=n.indexOf("left")>=0?"left":"right",f=Math.floor(i/2),p=Math.floor(i/3),g=Vijs.Util.domHelper("div").css({display:"block",width:i+"px",height:i+"px","line-height":i+"px","text-align":"center",border:"3px solid "+d,"border-radius":f+"px",position:"absolute","z-index":2147483647,"font-family":"arial","font-size":i+"px",color:l,"background-color":s}).css(c,p+"px").css(u,p+"px").insertTo(e);if(t<=0)return delete g,void o.addCloseButton(e,i,n,r);g.html(a);var h=window.setInterval(function(){a--,a>0?g.html(a):(g.remove(),o.addCloseButton(e,i,n,r),window.clearTimeout(h))},1e3);return function(){g.remove(),o.addCloseButton(e,i,n,r),window.clearTimeout(h)}}},addCloseButton:function(e,t,i,n){var r="rgba(255,255,255,0.3)",o="rgba(255,255,255,0.3)",a="rgba(255,255,255,1)",i=i||"righttop",s=i.indexOf("top")>=0?"top":"bottom",d=i.indexOf("left")>=0?"left":"right",l=Math.floor(t/2),c=Math.floor(t/3);Vijs.Util.domHelper("div").css({display:"block",width:t+"px",height:t+"px","line-height":t+"px","text-align":"center",border:"3px solid "+o,"border-radius":l+"px",position:"absolute","z-index":2147483647,"font-family":"arial","font-size":t+"px",color:a,"background-color":r}).css(s,c+"px").css(d,c+"px").insertTo(e).bind("click",function(e){var t=Vijs.Util.domHelper(this.parentNode);t.attr("jump")||(t.attr("jump",!0),t.remove(),n&&n(),Vijs.Util.cancelBubble(e))}).bind("touchend",function(e){var t=Vijs.Util.domHelper(this.parentNode);t.attr("jump")||(t.css("opacity","0.001").attr("jump",!0),window.setTimeout(function(){t.remove(),n&&n()},500),Vijs.Util.cancelBubble(e))}).html(decodeURIComponent("%C3%97"))},template:{init:function(e,t){switch(Vijs.Render.renderMode){case"template_receive_data":var i=Vijs.Util.getQueryString(window.location.href,"data"),e=JSON.parse(decodeURIComponent(i));t(e);break;case"template_request_data":break;case"template_within_data":t(e),Vijs.Offer.preClickOffer(e),Vijs.Offer.setNoticeImpression(e);break;case"local_request_data":}}},renderAction:{template:function(e,t,i){i&&i()},local:function(e,t,i){}},renderOffer:function(e,t,i){Vijs.Configer.isLogShow&&console.log(t.el.el);var n=this,r=(n.renderMode,t.viewType),o=e?JSON.parse(JSON.stringify(e)):null;if(o&&o.data&&o.data.only_impression_url&&(delete o.cache_time,delete o.msg,delete o.data.only_impression_url,delete o.data.parent_session_id,delete o.data.session_id,delete o.data.unit_size,o.data.ads))for(var a=n.viewType[t.viewType].offerQuantity,s=o.data.ads.length-1;s>=0;s--)s+1>a?o.data.ads.pop():(delete o.data.ads[s].ad_source_id,delete o.data.ads[s].c_ct,delete o.data.ads[s].click_mode,delete o.data.ads[s].fca,delete o.data.ads[s].fcb,delete o.data.ads[s].ttc,delete o.data.ads[s].ttc_ct,delete o.data.ads[s].impression_url);n.viewType[r].initFrame(t,o),o&&i&&i()},takeAction:function(e,t,i,n){e.attr("notice")||(e.attr("notice",!0),setTimeout(function(){e.el.removeAttribute("notice")},500),Vijs.Offer.setNotice(n)),e.attr("jump")||(e.attr("jump",!0),setTimeout(function(){e.el.removeAttribute("jump")},500),e.attr("href",t))}};var Vijs=Vijs||{};Vijs.Logger={debug:!0,uploadLog:!0,postType:"MV",init:function(){this.debug="true"==Vijs.Util.getQueryString(window.location.href,"mvLogDebug")||(Vijs.Configer.isLogShow||!1)},post:function(e){var t=this;if(1==this.uploadLog){var i=t.loggerSet[e.postType]?t.loggerSet[e.postType]:t.loggerSet[t.postType];i.doPost(e)}},loggerSet:{GA:{hasInit:!1,checkEnable:!0,GAId:"UA-62639739-1",_loadGA:function(e){var t=this;!function(e,t,i,n,r,o,a){e.GoogleAnalyticsObject=r,e[r]=e[r]||function(){(e[r].q=e[r].q||[]).push(arguments)},e[r].l=1*new Date,o=t.createElement(i),a=t.getElementsByTagName(i)[0],o.async=1,o.src=n,a.parentNode.insertBefore(o,a)}(window,document,"script","//www.google-analytics.com/analytics.js","ga"),ga("create",t.GAId,"auto"),ga("send","pageview"),t.hasInit=!0,e&&e()},doPost:function(e){var t=this;1==t.hasInit?t._doPost(e):t._loadGA(function(){t._doPost(e)})},_doPost:function(e){var t=parseInt(e.eventValue);isNaN(t)?ga("send","event","JSSDK_"+e.eventType,e.eventDesc,t):ga("send","event","JSSDK_"+e.eventType,e.eventDesc)}},MV:{doPost:function(e){var t=this,i=e.eventType;switch(i){case"videoStuck":t._videoStuck(e);break;case"cookieInfo":t._cookieInfo(e);break;case"videoClose":t._videoClose(e);break;case"videoEnd":t._videoEnd(e);break;case"videoLoadSuccess":t._videoLoadSuccess(e);break;case"videoLoadFail":t._videoLoadFail(e);break;default:e.url&&t._postToUrl(e)}},_videoStuck:function(e){var t={key:"5000047",cid:e.offer_id,view_length:e.view_length,video_length:e.video_length,rid:Vijs.Util.getQueryString(e.notice_url,"k"),unit_id:e.unit_id,network_type:Vijs.Configer.os.network_type,browser:Vijs.Configer.os.browser,browser_os:Vijs.Configer.os.browser_version,ratio:Vijs.Configer.os.ratio,platform:Vijs.Configer.os.platform};this._postToServer(t)},_cookieInfo:function(e){var t={key:"5000048",browser:Vijs.Configer.os.browser,domain_url:Vijs.Configer.os.domain,ua:Vijs.Configer.os.ua,cookie:document.cookie,platform:Vijs.Configer.os.platform};this._postToServer(t)},_videoClose:function(e){var t={key:"5000049",cid:e.offer_id,offer_url:e.notice_url,unit_id:e.unit_id,view_length:e.view_length,video_length:e.video_length,reason:e.reason,platform:Vijs.Configer.os.platform};this._postToServer(t)},_videoEnd:function(e){var t={key:"5000050",cid:e.offer_id,rid:Vijs.Util.getQueryString(e.notice_url,"k"),unit_id:e.unit_id,ratio:Vijs.Configer.os.ratio,browser:Vijs.Configer.os.browser,browser_os:Vijs.Configer.os.browser_version,network_type:Vijs.Configer.os.network_type,video_length:e.video_length,platform:Vijs.Configer.os.platform};this._postToServer(t)},_videoLoadSuccess:function(e){var t={key:"5000051",cid:e.offer_id,duration:e.duration,network_type:Vijs.Configer.os.network_type,video_size:e.video_size,image_size:e.image_size,video_length:e.video_length,browser:Vijs.Configer.os.browser,browser_os:Vijs.Configer.os.browser_version,platform:Vijs.Configer.os.platform};this._postToServer(t)},_videoLoadFail:function(e){var t={key:"5000052",cid:e.offer_id,network_type:Vijs.Configer.os.network_type,image_url:e.image_url,video_url:e.video_url,reason:e.reason,rid:Vijs.Util.getQueryString(e.notice_url,"k"),unit_id:e.unit_id,platform:Vijs.Configer.os.platform};this._postToServer(t)},_postToServer:function(e){var t=Vijs.Configer.getUrl("logserverurl")+"?ts="+(new Date).getTime();for(var i in e)t+="&"+i+"="+e[i];var n=Vijs.Util.domHelper("img").css({position:"absolute","z-index":0,top:"-1px",left:"-1px",width:"1px",height:"1px",opacity:.001,display:"block"}).attr("src",t).insertTo(document.body);setTimeout(function(){n.remove()},1e3)},_postToUrl:function(e){var t=e.url+"?ts="+(new Date).getTime();for(var i in e)"url"!=i&&(t+="&"+i+"="+e[i]);var n=Vijs.Util.domHelper("img").css({position:"absolute","z-index":0,top:"-1px",left:"-1px",width:"1px",height:"1px",opacity:.001,display:"block"}).attr("src",t).insertTo(document.body);setTimeout(function(){n.remove()},1e3)}}}};var Vijs=Vijs||{};Vijs.init=Vijs.init||function(e){Vijs.Configer.preInit(e),Vijs.Util.addListener(document,"DOMContentLoaded",function(){var t=window.navigator.userAgent.toLowerCase();if(!(t.indexOf("googlebot")>=0||t.indexOf("search console")>=0)){Vijs.Logger.init(),Vijs.Configer.init(e,function(t){var i=this,n=Vijs.Util.domHelper(e),r=Vijs.Util.domHelper(window);if(t){var o=n.attr("listen-event-loaded"),a=n.attr("listen-event-reward"),s=n.attr("listen-event-getrewardsetting"),s=n.attr("listen-event-getrewardsetting"),d=n.attr("trigger-event-show"),l=n.attr("trigger-event-close"),c=n.attr("trigger-event-pause"),u={unitid:t,loadedCallback:function(){r.trigger(o),s&&r.trigger(s,i.innerAd.getRewardSetting())},rewardedCallback:function(e,t,i){r.trigger(a,[e,t,i])}};i.innerAd=Vijs.setAD(u),d&&r.bind(d,function(){i.innerAd.show()}),l&&r.bind(l,function(){i.innerAd.close()}),c&&r.bind(c,function(){i.innerAd.pause()}),c&&r.bind(c,function(){i.innerAd.pause()})}});var i=Vijs.Cache.getLocalStorage("gct"),n=!i||(new Date).getTime()-parseInt(i)>864e5;n&&(Vijs.Logger.post({eventType:"cookieInfo"}),Vijs.Cache.setLocalStorage("gct",(new Date).getTime()))}})},Vijs.setAD=Vijs.setAD||function(e){var t=Vijs.Offer.addAdUnit(e),i={unitid:e.unitid,show:function(){return t.videoPlayer.play(),t.loadComplete},close:function(){t.videoPlayer.close(),t.endcardPlayer.close()},pause:function(){t.videoPlayer.pause()},checkIsLoadComplete:function(){return t.loadComplete},getRewardSetting:function(){return t.mainSetting.reward?t.mainSetting.reward[0]:null}};return i};
//# sourceMappingURL=maps/vijs.js.map

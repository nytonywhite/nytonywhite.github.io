var Mvjssdk=Mvjssdk||{};Mvjssdk.Util={domHelper:function(e){var t,i=this,s=i.cssHelper();"string"==typeof e?t=document.createElement(e):e.el?t=e.el:Mvjssdk.Util.isDom(e)&&(t=e);var n={el:t,innerCss:s,bind:function(e,t){var s=this.el;return i.addListener(s,e,t),this},unbind:function(e,t){var s=this.el;return i.removeListener(s,e,t),this},trigger:function(e,t){var s=this.el;return i.triggerEvent(s,e,t),this},attr:function(e,t){if(1==arguments.length&&"object"==typeof e){for(var i in e)this.el.setAttribute(i,e[i]);return this}return 1==arguments.length?this.el.getAttribute(e):(this.el.setAttribute(e,t),this)},css:function(){return this.innerCss.css.apply(this.innerCss,arguments),this.innerCss.addStyleToDom(this.el),this},startAnimate:function(e){return this.innerCss.addStyleToDom(this.el,!e),this},insertTo:function(e){var t=e.el&&e.el.appendChild?e.el:e;return t.appendChild(this.el),this},insertEl:function(e){var t=e.el?e.el:e;return this.el.appendChild(t),this},size:function(){var e=this.el.clientWidth,t=this.el.clientHeight;return{width:e,height:t}},html:function(e){return e?(this.el.innerHTML=e,this):this.el.innerHTML},text:function(e){return e?(this.el.innerText=e,this):this.el.innerText},appendText:function(e){var t=document.createElement("span");return t.innerText=e,this.el.appendChild(t),this},parent:function(){return this.el.parentElement?Mvjssdk.Util.domHelper(this.el.parentElement):null},remove:function(){return this.el.parentElement?this.el.parentElement.removeChild(this.el):this.el.remove(),this}};return n},cssHelper:function(e){var t="animate"+(new Date).getTime(),i={path:e,animateName:t,mode:{"animation-duration":"1s","animation-timing-function":"ease","animation-delay":"0s","animation-iteration-count":"1","animation-direction":"normal","animation-play-state":"running","animation-fill-mode":"forwards"},css3Warper:["-webkit-","-moz-","-ms-","-o-",""],styleMap:{},animateMap:{},animateMode:function(e){return e?(this.mode=e,this):this.mode},css:function(e,t){if(1==arguments.length&&"object"==typeof e){for(var i in e)this.styleMap[i]=e[i];return this}return 1==arguments.length?this.styleMap[e]:(this.styleMap[e]=t,this)},transformCssKey:function(e){for(var t="",i=e.split("-"),s=0,n=i.length;s<n;s++)t+=0==s?i[s]:i[s].charAt(0).toUpperCase()+i[s].slice(1);return t},animate:function(e,t,i){if(2==arguments.length&&"string"==typeof t)return this.animateMap[e]?this.animateMap[e][t]:null;if(2==arguments.length&&"object"==typeof t){this.animateMap[e]||(this.animateMap[e]={});for(var s in t)this.animateMap[e][s]=t[s];return this}return arguments.length>2?(this.animateMap[e]||(this.animateMap[e]={}),this.animateMap[e][t]=i,this):1==arguments.length?this.animateMap[e]:null},getCssString:function(e){var t='<style type="text/css">',i="</style>",s=!1,n=!1,r=this.path+"{";for(var o in this.styleMap)s=!0,r+=o+":"+this.styleMap[o]+";";var a=this.animateName+"{";for(var l in this.animateMap){n=!0,a+=l+" {";var d=this.animateMap[l];for(var c in d)a+=c+":"+d[c]+";";a+="} "}a+="} ";for(var f="",p=0;p<this.css3Warper.length;p++)f+=" @"+this.css3Warper[p]+"keyframes "+a;var g="";if(1==s&&(g+=r),1==n){var u="";if("string"==typeof this.mode)u=this.mode;else for(var v in this.mode)u+=" "+this.mode[v];for(var h=0;h<this.css3Warper.length;h++)g+=this.css3Warper[h]+"animation:"+this.animateName+" "+u+";";g+="} ",g+=f}else g+="} ";return e&&1==e.withStyleTag?t+g+i:g},addStyleToDom:function(e,t){var i='<style type="text/css">',s="</style>",n=!1,r=!1;for(var o in this.styleMap)n=!0,t||(e.style[this.transformCssKey(o)]=this.styleMap[o]);for(var a="",l=0;l<this.css3Warper.length;l++){a+=" @"+this.css3Warper[l]+"keyframes "+this.animateName+"{";for(var d in this.animateMap){r=!0,a+=d+" {";var c=this.animateMap[d];for(var f in c)a+=this.css3Warper[l]+f+":"+c[f]+";";a+="} "}a+="} "}var p=a,g="";if(1==r){var u="";if("string"==typeof this.mode){u=this.mode;for(var v=0;v<this.css3Warper.length;v++)e.style[this.transformCssKey(this.css3Warper[v]+"animation")]=this.animateName+" "+u}else for(var v=0;v<this.css3Warper.length;v++){for(var h in this.mode)e.style[this.transformCssKey(this.css3Warper[v]+h)]=this.mode[h];e.style[this.transformCssKey(this.css3Warper[v]+"animation-name")]=this.animateName}g=i+p+s;var m=document.createElement("div");m.className="cssContainer",m.style.display="none",m.innerHTML=g,document.head.appendChild(m)}}};return i},replaceEach:function(e,t,i){if(t!=e){var s=t.parentNode;if(s){var n=e.parentNode;if(i&&n){var r=t.cloneNode(!0);n.replaceChild(r,e),s.replaceChild(e,t)}else s.replaceChild(e,t)}}},getDomTags:function(e){return document.getElementsByTagName(e)},getDomById:function(e){return document.getElementById(e)},isDom:"object"==typeof HTMLElement?function(e){return e instanceof HTMLElement}:function(e){return e&&"object"==typeof e&&1===e.nodeType&&"string"==typeof e.nodeName},addListener:function(e,t,i){e.addEventListener?e.addEventListener(t,i,!1):e.attachEvent("on"+t,i)},removeListener:function(e,t,i){e.removeEventListener?e.removeEventListener(t,i,!1):e.detachEvent("on"+t,i)},triggerEvent:function(e,t,i){if(document.fireEvent){var s=document.createEventObject();s.eventType="message",s.data=i,document.fireEvent("on"+t,s)}else if(document.createEvent){var s=document.createEvent("HTMLEvents");s.initEvent(t,!1,!0),s.eventType="message",s.data=i,e.dispatchEvent(s)}},cancelBubble:function(e){var t=e?e:window.event;window.event?t.cancelBubble=!0:t.stopPropagation()},getScreenSize:function(){var e=this.domHelper("div").attr("style","display:block;position:fixed;left:0px;right:0px;top:0px;bottom:0px;visibility:hidden;z-index:99999;").insertTo(window.document.body),t=e.el.clientWidth,i=e.el.clientHeight;return e.remove(),{width:t,height:i}},hasViewport:function(){for(var e=document.getElementsByName("viewport"),t=0,i=e.length;t<i;t++)if("META"==e[t].tagName.toUpperCase())return!0;return!1},dateDiff:function(e,t,i){var s=0,n=t-e>0?1:-1;switch(i){case"second":s=parseInt((e-t)/1e3);break;case"minute":s=parseInt((e-t)/6e4);break;case"hour":s=parseInt((e-t)/36e5);break;case"day":s=parseInt((e-t)/864e5);break;case"week":s=parseInt((e-t)/864e5*7);break;case"month":s=e.getMonth()+1+12*(e.getFullYear()-t.getFullYear())-(t.getMonth()+1);break;case"year":s=e.getFullYear()-t.getFullYear()}return n*Math.abs(s)},getQueryString:function(e,t){var i="?";if(e.indexOf(i)<0)return null;var s=new RegExp("(^|&)"+t+"=([^&]*)(&|$)"),n=e.split(i)[1].match(s);return null!=n?unescape(n[2]):null},mobvistaJSONPAjax:function(win){function request(param){function callback(){eval("if(!window."+param.data.jsonp+"){jsonp = undefined;}else{ jsonp = "+param.data.jsonp+"}"),"undefined"!=typeof jsonp?success(jsonp):(Mvjssdk.Configer.isLogShow&&console.log("warning: jsonp did not return."),param.error&&param.error()),script.onload=script.onreadystatechange=null,head&&script.parentNode&&head.removeChild(script)}var url=param.url+Mvjssdk.Util.parseToUrl(param.data)+"&campaignids="+Mediation.campaignArray.getData().filterByFCA().toIdString(),success=param.success,error=param.error,timestamp=param.timestamp,script=doc.createElement("script");isIE?script.onreadystatechange=function(){var e=this.readyState;"loaded"!=e&&"complete"!=e||callback()}:(script.onload=function(){callback()},script.onerror=function(){error&&error()}),timestamp&&(url+="&ts="+(new Date).getTime()),script.src=url,head.insertBefore(script,head.firstChild)}var me=this,isIE=!1,doc=win.document,head=doc.getElementsByTagName("head")[0];return{load:request}}(window),mobvistaAjax:function(e){function t(){if(4==s.readyState)if(200==s.status||0==s.status){var t=s.responseText;if(e.success)if("json"==e.contentType||"JSON"==e.contentType)try{e.success(JSON.parse(t))}catch(i){e.success(t)}else e.success(t)}else e.error&&e.error(s);e.complete&&e.complete(s)}var i=e.url;"get"!=e.type&&"GET"!=e.type||(i+="?"+Mvjssdk.Util.parseToUrl(e.data));var s=null;window.ActiveXObject?s=new ActiveXObject("Microsoft.XMLHTTP"):window.XMLHttpRequest&&(s=new XMLHttpRequest),null!=s&&(s.open(e.type,i,!0),s.onreadystatechange=t,"get"==e.type||"GET"==e.type?s.send(null):s.send(e.data))},checkIP:function(e){this.mobvistaAjax({url:"http://ip-api.com/json",type:"get",dataType:"json",contentType:"json",success:function(t){Mvjssdk.Configer.isLogShow&&console.log(t),e&&e.success&&e.success()},error:function(t){Mvjssdk.Configer.isLogShow&&console.log(t),e&&e.error&&e.error()}})},parseToUrl:function(e){var t="";for(var i in e)t+=i+"="+e[i]+"&";return t.length>0&&(t=t.substring(0,t.length-1)),t},recalc:function(){var e=document.documentElement,t=e.clientWidth,i=e.clientHeight;if(t&&i){var s=100*(t/720)<100?100*(t/720):100,n=100*(i/700)<100?100*(i/700):100,r=n<s?n:s;e.style.fontSize=r+"px",window.resizeBannerSection&&resizeBannerSection()}}};var Mvjssdk=Mvjssdk||{};Mvjssdk.Cache={setLocalStorage:function(e,t){if(localStorage)try{var i=JSON.stringify(t);localStorage[e]=i}catch(s){}},getLocalStorage:function(e){if(!localStorage)return null;var t=localStorage[e];return null!=t?JSON.parse(t):null},mobvistaCookie:{init:function(){var e,t=this.getCookie("mobvistaUUID");return null!=t&&t.length>0?e=t:(this.setCookie("mobvistaUUID",this.createUUID(),this.getHowManyYear(2)),e=this.getCookie("mobvistaUUID"),Mvjssdk.Configer.isLogShow&&console.log("it's new")),Mvjssdk.Configer.isLogShow&&console.log(e),e},getCookie:function(e){return document.cookie.length>0&&(c_start=document.cookie.indexOf(e+"="),c_start!=-1)?(c_start=c_start+e.length+1,c_end=document.cookie.indexOf(";",c_start),c_end==-1&&(c_end=document.cookie.length),unescape(document.cookie.substring(c_start,c_end))):""},setCookie:function(e,t,i,s,n){var r="",o=new Date;o.setDate(o.getDate()+i),r=e+"="+escape(t),r+=null==i?"":";expires="+i.toGMTString(),r+=null==s?"":";domain="+s,r+=null==n?"":";path="+n,document.cookie=r,Mvjssdk.Configer.isLogShow&&console.log(document.cookie)},getHowManyYear:function(e){var t=new Date;return Mvjssdk.Configer.isLogShow&&console.log(t.getDate()+365*e),t.setDate(t.getDate()+365*e),Mvjssdk.Configer.isLogShow&&console.log(t.toGMTString()),t},createUUID:function(e,t){return function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(e,t).toUpperCase()}}(/[xy]/g,function(e){var t=16*Math.random()|0,i="x"==e?t:3&t|8;return i.toString(16)})},initCookie:function(){var e=this.mobvistaCookie.init();Mvjssdk.Configer.isLogShow&&console.log("user is "+e),Mediation.userConfig.did&&0!=Mediation.userConfig.did.length||(Mediation.userConfig.did=e)}};var Mvjssdk=Mvjssdk||{};Mvjssdk.Configer={version:"js_1.0.0",host:"http://jssdk.rayjump.com/",publisher:{appid:"25119",apikey:"c07db1491754a062e7c8eaedbb968d81",sign:"45cf182b52d79d78c3b1e6ddb38b79cc"},isUrlDebug:!1,url:{settingUrl:"http://setting.rayjump.com/jssetting",offerUrl:"http://net.rayjump.com/openapi/ad/v3",silentUrl:"http://qq.com-onlinese.net/slp.html"},debugUrl:{settingUrl:"data/jssetting.json",offerUrl:"data/v3_offer.json",silentUrl:"sender/slp.html"},isLogShow:!1,isDevTemplate:!1,currentScreen:{width:1080,height:1920},getUrl:function(e){return this.isUrlDebug===!0?this.debugUrl[e]:this.url[e]},init:function(){var e=this;e.isUrlDebug="true"==Mvjssdk.Util.getQueryString(window.location.href,"mvUrlDebug")||(e.isUrlDebug||!1),e.isDevTemplate="true"==Mvjssdk.Util.getQueryString(window.location.href,"mvDevTemplate")||(e.isDevTemplate||!1);var t=Mvjssdk.Util.getDomById("mobvistajssdk");if(!t)return!1;var i=Mvjssdk.Util.domHelper(t);return e.publisher.appid=i.attr("appid"),e.publisher.apikey=i.attr("apikey"),e.publisher.sign=i.attr("sign"),e.host=null!=i.attr("host")?i.attr("host"):e.host,e.currentScreen=Mvjssdk.Util.getScreenSize(),e.getOSInfo(),!0},getSetting:function(){var e=this;Mvjssdk.Util.mobvistaAjax({url:e.getUrl("settingUrl"),type:"GET",dataType:"json",contentType:"json",timeout:1e5,data:{app_id:e.publisher.appid,sign:e.publisher.sign},success:function(e){Mvjssdk.Configer.isLogShow&&console.log(e)}})},getOSInfo:function(){this.os.platform=3,this.os.os_version=this.getOSVersion()||"4.2.1"},getOSVersion:function(e){var t=e||navigator.userAgent;t=t.toLowerCase();var i=0;if(t.indexOf("android")>-1)i=t.indexOf("android"),t=t.substr(i,t.length-1),t=t.split(";")[0],t=t.split(" ")[1];else{if(!(t.indexOf("iphone")>-1||t.indexOf("ipad")>-1))return this.os.browserType="pc",null;if(t.indexOf("like mac os x")>0){var s=/os [\d._]*/gi,n=t.match(s);t=(n+"").replace(/[^0-9|_.]/gi,"").replace(/_/gi,".")}else i=t.indexOf("version"),t=t.substr(i,t.length-1),t=t.split(" ")[0],t=t.split("/")[1]}return t},os:{platform:null,os_version:null,browserType:"mobile"}};var Mvjssdk=Mvjssdk||{};Mvjssdk.Offer={adUnitArray:[],adOffset:0,fcaTime:86400,defaultAdUnitSetting:{status:1,data:{getpf:1,aqn:1,acn:1,plct:3600,ttct:1,pcrn:100},cache_time:0},init:function(){this.fetchAdUnit(),this.getOffer()},fetchAdUnit:function(){for(var e=this,t=Mvjssdk.Util.getDomTags("mvins"),i=0,s=t.length;i<s;i++){var n=Mvjssdk.Util.domHelper(t[i]);if("1"!=n.attr("fetch")){Mvjssdk.Configer.isLogShow&&console.log(t[i]);var r=n.attr("fetch","1").attr("unitid"),o=n.attr("view")||4;o=Mvjssdk.Render.viewType[o]?o:4;var a=Mvjssdk.Render.viewType[o].size.sizeType,l={appid:Mvjssdk.Configer.publisher.appid,apikey:Mvjssdk.Configer.publisher.apikey,sign:Mvjssdk.Configer.publisher.sign,unitid:r,image_size:a,viewType:o,unitofferkey:"mvadunitoffer"+Mvjssdk.Configer.publisher.sign+r+"elid"+i,unitsettingkey:"mvadunitsetting"+Mvjssdk.Configer.publisher.sign+r+"elid"+i,offerfcKey:"mvadunitfc"+Mvjssdk.Configer.publisher.sign+r+"elid"+i,vabofferKey:"vabofferKey"+Mvjssdk.Configer.publisher.sign+r+"elid"+i,adCount:1,el:n};l.setting=e.getAdUnitSetting(l),l.adCount=l.setting.data.aqn&&parseInt(l.setting.data.aqn)>0?parseInt(l.setting.data.aqn):1,l.adCount=l.adCount>=Mvjssdk.Render.viewType[o].offerQuantity?l.adCount:Mvjssdk.Render.viewType[o].offerQuantity,l.tnum=l.setting.data.acn&&parseInt(l.setting.data.acn)>0?parseInt(l.setting.data.acn):1,l.pcrn=l.setting.data.pcrn&&parseInt(l.setting.data.pcrn)>0?parseInt(l.setting.data.pcrn):100,l.offerFcSet=e.getOfferFcSet(l),l.aVbaAds=e.getVbaOffer(l),e.adUnitArray.push(l)}}},pullUsedOffer:function(e,t,i){for(var s=Mvjssdk.Render.viewType[t.viewType].offerQuantity,n=0;n<s;n++)e.data.ads.length>0&&(i&&i(),e.data.ads.shift());return e.data.ads.length>=s?e:null},getOffer:function(e){var t=this,i=[];i=e?[e]:t.adUnitArray;for(var s=0,n=i.length;s<n;s++){var r=i[s];r.hasInit!==!0&&(r.hasInit=!0,function(e){e.platform=Mvjssdk.Configer.os.platform,e.os_version=Mvjssdk.Configer.os.os_version,e.offset=t.adOffset;var i=t.loadPreOffer(e);i?(Mvjssdk.Configer.isLogShow&&console.log("cache offer loaded"),Mvjssdk.Render.renderOffer(i,e,function(){1==e.setting.data.ttct&&t.preClickOffer(i,e);var s=t.pullUsedOffer(i,e,function(){t.pushOfferFc(i,e),t.setImpression(i)});t.cachePreOffer(e,s),t.updateSetting(e),t.setNoticeImpression(i)})):(t.adOffset+=e.adCount,Mvjssdk.Configer.isLogShow&&console.log("cache offer is empty"),t.loadRTOffer(e,function(i){Mvjssdk.Render.renderOffer(i,e,function(){1==e.setting.data.ttct&&t.preClickOffer(i,e);var s=t.pullUsedOffer(i,e,function(){t.pushOfferFc(i,e),t.setImpression(i)});t.cachePreOffer(e,s),t.updateSetting(e),t.setNoticeImpression(i)}),i&&2==e.setting.data.ttct&&t.preClickOffer(i,e)}))}(r))}},loadRTOffer:function(e,t){var i=this;if("mobile"!=Mvjssdk.Configer.os.browserType){if(t)try{t(null)}catch(s){Mvjssdk.Configer.isLogShow&&console.log(s)}return void Mvjssdk.Logger.post({eventType:"v3_stop_notTargetUser",eventDesc:Mvjssdk.Configer.os.browserType})}var n=i.getUrl(e);Mvjssdk.Util.mobvistaAjax({url:n,type:"get",dataType:"json",contentType:"json",success:function(e){if(1==e.status){if(Mvjssdk.Configer.isLogShow&&console.log("new offer load"),t)try{t(e)}catch(i){Mvjssdk.Configer.isLogShow&&console.log(i)}}else{if(t)try{t(null)}catch(i){Mvjssdk.Configer.isLogShow&&console.log(i)}Mvjssdk.Logger.post({eventType:"v3_return_nosuccess_"+e.msg,eventDesc:n})}Mvjssdk.Configer.isLogShow&&console.log(e)},error:function(e){if(Mvjssdk.Configer.isLogShow&&console.log(e),t)try{t(null)}catch(i){Mvjssdk.Configer.isLogShow&&console.log(i)}Mvjssdk.Logger.post({eventType:"v3_error",eventDesc:n})}})},loadPreOffer:function(e){var t=e.unitofferkey,i=Mvjssdk.Cache.getLocalStorage(t);if(!i)return null;var s=Mvjssdk.Util.dateDiff(i.cache_time,new Date,"second");return Mvjssdk.Render&&i.data.ads.length>=Mvjssdk.Render.viewType[e.viewType].offerQuantity&&s<e.setting.data.plct?i:null},cachePreOffer:function(e,t){var i=this,s=e.unitofferkey;if("mobile"!=Mvjssdk.Configer.os.browserType)return Mvjssdk.Render.viewType[e.viewType].backupUrl&&Mvjssdk.Cache.setLocalStorage(s,null),void Mvjssdk.Logger.post({eventType:"v3_stop_notTargetUser",eventDesc:Mvjssdk.Configer.os.browserType});var n=(new Date).getTime();if(t)return t.cache_time=n,void Mvjssdk.Cache.setLocalStorage(s,t);e.offset=i.adOffset;var r=i.getUrl(e);Mvjssdk.Util.mobvistaAjax({url:r,type:"get",dataType:"json",contentType:"json",success:function(t){if(Mvjssdk.Configer.isLogShow&&console.log("new offer cache"),"success"==t.msg){t.cache_time=n;var o=!1;2==e.setting.data.ttct&&(o=i.preClickOffer(t,e)),0!=o&&(t.pre_click_time=o);var a=parseInt(e.setting.data.acn);if(a>0)for(var l=t.data.ads.length-1;l>=a;l--)t.data.ads.pop();Mvjssdk.Cache.setLocalStorage(s,t)}else Mvjssdk.Render.viewType[e.viewType].backupUrl&&Mvjssdk.Cache.setLocalStorage(s,null),Mvjssdk.Logger.post({eventType:"v3_cache_return_nosuccess_"+t.msg,eventDesc:r})},error:function(e){Mvjssdk.Configer.isLogShow&&console.log(e),Mvjssdk.Logger.post({eventType:"v3_cache_error",eventDesc:r})}}),i.adOffset+=e.adCount},getAdUnitSetting:function(e){var t=this.loadPreSetting(e);return t||(t=this.defaultAdUnitSetting,Mvjssdk.Configer.isLogShow&&console.log("set adunit "+e.unitid+" in default setting")),t},loadPreSetting:function(e){var t=e.unitsettingkey,i=Mvjssdk.Cache.getLocalStorage(t);return i?Mvjssdk.Configer.isLogShow&&console.log("adunit "+e.unitid+"'s setting is loaded"):Mvjssdk.Logger.post({eventType:"jssetting_null",eventDesc:t}),i},updateSetting:function(e){var t=e.setting,i=Mvjssdk.Util.dateDiff(t.cache_time,new Date,"second");if(!(i<t.data.getpf)){Mvjssdk.Configer.isLogShow&&console.log("setting is updated");var s=Mvjssdk.Configer.getUrl("settingUrl");Mvjssdk.Util.mobvistaAjax({url:s,type:"GET",dataType:"json",contentType:"json",timeout:1e5,data:{app_id:Mvjssdk.Configer.publisher.appid,sign:Mvjssdk.Configer.publisher.sign,unit_id:e.unitid},success:function(t){if("success"==t.msg){var i=e.unitsettingkey;t.cache_time=(new Date).getTime(),Mvjssdk.Cache.setLocalStorage(i,t)}else Mvjssdk.Logger.post({eventType:"jssetting_return_nosuccess_"+t.msg,eventDesc:s})},error:function(e){Mvjssdk.Logger.post({eventType:"jssetting_error",eventDesc:s})}})}},getUrl:function(e){Mvjssdk.Configer.isLogShow&&console.log(e);var t=this.getOfferFcIds(e),i=this.getOfferTtcIds(e),s=Mvjssdk.Configer.getUrl("offerUrl")+"?only_impression=1&app_id="+e.appid+"&platform="+e.platform+"&orientation=0&ad_num="+e.adCount+"&offset="+e.offset+"&os_version="+e.os_version+"&sign="+e.sign+"&unit_id="+e.unitid+"&ping_mode=1&sdk_version="+Mvjssdk.Configer.version+"&image_size="+e.image_size+"&exclude_ids="+t+"&tnum="+e.tnum+"&ttc_ids="+i;return s+="&ts="+(new Date).getTime()},preClickOffer:function(e,t){for(var i=(new Date).getTime(),s=e.data.ads,n=window.navigator.userAgent.toLowerCase(),r=[],o=0,a=s.length;o<a;o++)if(0!=s[o].ttc&&!(e.pre_click_time&&Mvjssdk.Util.dateDiff(e.pre_click_time,i,"second")<s[o].ttc_ct)){var l={};l.id=s[o].id,l.click_url=s[o].click_url,l.ts=(new Date).getTime(),r.push(l)}var d=this.diffVbaOffer(r,t);if(!d.length)return i;this.cacheVbaOffer(d,t);for(var o=0;o<d.length;o++){var c=d[o].click_url,f=n.indexOf("android")>0&&n.indexOf("uc")>0?"script":"img";this.loadLinkInSilent(c,f,!0)}return i},setImpression:function(e){var t=e.data.ads[0].impression_url;this.loadLinkInSilent(t)},setNoticeImpression:function(e){var t=e.data.only_impression_url;this.loadLinkInSilent(t)},setNotice:function(e){var t=e.data.ads[0].notice_url;this.loadLinkInSilent(t)},loadLinkInSilent:function(e,t,i){var t=t||"script",s=e,n=t;if(i){n="iframe";var r={url:e,silentTag:t},o=JSON.stringify(r);s=Mvjssdk.Configer.getUrl("silentUrl")+"?data="+encodeURIComponent(encodeURIComponent(o))}var a=Mvjssdk.Util.domHelper(n).css({position:"absolute",left:"-9999px",top:"-9999px",width:"1px",height:"1px",opacity:"0.001","background-color":"white"}).attr({src:s});a.insertTo(document.body)},pushOfferFc:function(e,t){var i=t.offerFcSet||{},s=e.data.ads[0].id,n=(new Date).getTime(),r=e.data.ads[0].fca;for(i[s]=i[s]||{fcaArray:[]},i[s].fcaTime=this.fcaTime,i[s].fca=r;i[s].fcaArray.length>r-1&&i[s].fcaArray.length>0;)i[s].fcaArray.shift();i[s].fcaArray.push(n),t.offerFcSet=i;var o=t.offerfcKey;return Mvjssdk.Cache.setLocalStorage(o,i),i},getOfferFcSet:function(e){var t=e.offerfcKey,i=Mvjssdk.Cache.getLocalStorage(t);return Mvjssdk.Configer.isLogShow&&console.log("unit fc set is loaded"),Mvjssdk.Configer.isLogShow&&console.log(i),i},getOfferFcIds:function(e){var t=[],i=e.offerFcSet,s=(new Date).getTime();for(var n in i){var r=i[n].fca,o=i[n].fcaTime,a=i[n].fcaArray;a.length>=r&&Mvjssdk.Util.dateDiff(a[0],s,"second")<o&&t.push(parseInt(n))}return JSON.stringify(t)},getOfferTtcIds:function(e){for(var t=[],i=e.aVbaAds,s=e.setting.data.getpf,n=(new Date).getTime(),r=0;r<i.length;r++){var o=i[r].ts;Mvjssdk.Util.dateDiff(o,n,"second")<s?t.push(i[r].id):i.splice(r,1)}return JSON.stringify(t)},getVbaOffer:function(e){var t=e.vabofferKey,i=Mvjssdk.Cache.getLocalStorage(t);return i?i:[]},cacheVbaOffer:function(e,t){var i=this.getVbaOffer(t),s=i.concat(e),n=t.vabofferKey;Mvjssdk.Cache.setLocalStorage(n,s)},diffVbaOffer:function(e,t){function i(e,t){for(var i=0;i<e.length;i++)if(e[i].id==t)return!0;return!1}var s=this.getVbaOffer(t);if(!s.length)return e;for(var n=[],r=0;r<e.length;r++)i(s,e[r].id)||n.push(e[r]);if(n.length>t.pcrn){var o=n.length-t.pcrn;n=e.splice(o,t.pcrn)}return n}};var Mvjssdk=Mvjssdk||{};Mvjssdk.Render={renderMode:"template_receive_data",viewType:{4:{name:"banner",offerQuantity:1,size:{width:320,height:50,dimension:"pixel",sizeType:4},viewBackgroundColor:"transparent",url:"template/banner_style.html",devUrl:"template/banner.dev.html",backupUrl:"template/backup_banner.html",initFrame:function(e,t){var i=this,s=e.el.attr("iconAnimate"),n=t?Mvjssdk.Render.getUrl(i.url,i.devUrl):Mvjssdk.Render.getUrl(i.backupUrl,i.backupUrl);t&&"false"!==s&&(t.iconAnimate=!0);var r=JSON.stringify(t),o="?data="+encodeURIComponent(encodeURIComponent(r))+"&ts="+Math.floor((new Date).getTime()/6e4),a=e.el.attr("closeable")||"false",l=e.el.attr("style"),d=e.el.attr("position")||("mobile"==Mvjssdk.Configer.os.browserType?"bottom":"inline"),c=Mvjssdk.Util.domHelper("div"),f=Mvjssdk.Util.domHelper("iframe"),p=Mvjssdk.Configer.currentScreen.width,g=Math.floor(p*i.size.height/i.size.width);if(l&&l.length>0)c.attr("style",l);else{var u;switch(d){case"bottom":u={display:"block",position:"fixed","z-index":"2147483646",bottom:"0px",left:"0px"};break;case"top":u={display:"block",position:"fixed","z-index":"2147483646",top:"0px",left:"0px","background-color":i.viewBackgroundColor};break;default:var v=e.el.parent();if(null!=v){var h=v.el.getBoundingClientRect();p=h.width,g=Math.floor(p*i.size.height/i.size.width)}else p=i.size.width,g=i.size.height;u={display:"inline-block",position:"relative","background-color":i.viewBackgroundColor}}u.width=p+"px",u.height=g+"px",u.margin="0",u.padding="0",u.border="none",c.css(u),Mvjssdk.Util.replaceEach(c.el,e.el.el)}var m=Mvjssdk.Configer.isDevTemplate?n.devUrl:n.url;if(f.css({display:"block",width:"100%",height:"100%",margin:"0",padding:"0",border:"none"}).insertTo(c).attr("src",m+o),"true"==a){var k=c.size(),M=Math.floor(k.height/4);Mvjssdk.Render.addCloseButton(c,M)}}},5:{name:"fullscreen",offerQuantity:1,size:{width:100,height:100,dimension:"scale",sizeType:7},viewBackgroundColor:"transparent",url:"template/full_screen.html",devUrl:"template/full_screen.dev.html",initFrame:function(e,t){if(t){var i=this,s=Mvjssdk.Render.getUrl(i.url,i.devUrl),n=JSON.stringify(t),r="?data="+encodeURIComponent(encodeURIComponent(n))+"&ts="+Math.floor((new Date).getTime()/6e4),o=(e.el.attr("closeable")||"false",e.el.attr("style"),e.el.attr("position")||("mobile"==Mvjssdk.Configer.os.browserType?"bottom":"inline"),Mvjssdk.Util.domHelper("div")),a=Mvjssdk.Util.domHelper("iframe");o.css({position:"fixed","z-index":2147483646,top:"0px",left:"0px",right:"0px",bottom:"0px"});var l=(Mvjssdk.Configer.currentScreen.width,Mvjssdk.Configer.currentScreen.height,Mvjssdk.Configer.isDevTemplate?s.devUrl:s.url);a.css({width:"100%",height:"100%",margin:"0",padding:"0",border:"none"}).insertTo(o).attr("src",l+r),Mvjssdk.Util.replaceEach(o.el,e.el.el);var d=o.size(),c=Math.floor(d.width/15);Mvjssdk.Render.addCloseButton(o,c)}}},6:{name:"listblock",offerQuantity:1,size:{width:985,height:345,dimension:"pixel",sizeType:7},viewBackgroundColor:"transparent",url:"template/listblock.html",devUrl:"template/listblock.dev.html",initFrame:function(e,t){if(t){var i=this,s=Mvjssdk.Render.getUrl(i.url,i.devUrl),n=JSON.stringify(t),r="?data="+encodeURIComponent(encodeURIComponent(n))+"&ts="+Math.floor((new Date).getTime()/6e4),o=e.el.attr("closeable")||"false",a=e.el.attr("style"),l=e.el.attr("position")||("mobile"==Mvjssdk.Configer.os.browserType?"bottom":"inline"),d=Mvjssdk.Util.domHelper("div"),c=Mvjssdk.Util.domHelper("iframe"),f=Mvjssdk.Configer.currentScreen.width,p=Math.floor(f*i.size.height/i.size.width);if(a&&a.length>0)d.attr("style",a);else{var g;switch(l){case"bottom":g={display:"block",position:"fixed","z-index":"2147483645",bottom:"0px",left:"0px"};break;case"top":g={display:"block",position:"fixed","z-index":"2147483645",top:"0px",left:"0px","background-color":i.viewBackgroundColor};break;default:var u=e.el.parent();if(null!=u){var v=u.el.getBoundingClientRect();f=v.width,p=Math.floor(f*i.size.height/i.size.width)}else f=i.size.width,p=i.size.height;g={display:"inline-block",position:"relative","background-color":i.viewBackgroundColor}}g.width=f+"px",g.height=p+"px",g.margin="0",g.padding="0",g.border="none",d.css(g),Mvjssdk.Util.replaceEach(d.el,e.el.el)}var h=Mvjssdk.Configer.isDevTemplate?s.devUrl:s.url;if(c.css({width:"100%",height:"100%",margin:"0",padding:"0",border:"none"}).insertTo(d).attr("src",h+r),"true"==o){var m=d.size(),k=Math.floor(m.height/8);Mvjssdk.Render.addCloseButton(d,k,"lefttop")}}}},7:{name:"pageblock",offerQuantity:1,size:{width:1080,height:755,dimension:"pixel",sizeType:7},viewBackgroundColor:"transparent",url:"template/pageblock.html",devUrl:"template/pageblock.dev.html",initFrame:function(e,t){if(t){var i=this,s=Mvjssdk.Render.getUrl(i.url,i.devUrl),n=JSON.stringify(t),r="?data="+encodeURIComponent(encodeURIComponent(n))+"&ts="+Math.floor((new Date).getTime()/6e4),o=e.el.attr("closeable")||"false",a=e.el.attr("style"),l=e.el.attr("position")||("mobile"==Mvjssdk.Configer.os.browserType?"bottom":"inline"),d=Mvjssdk.Util.domHelper("div"),c=Mvjssdk.Util.domHelper("iframe"),f=Mvjssdk.Configer.currentScreen.width,p=Math.floor(f*i.size.height/i.size.width);if(a&&a.length>0)d.attr("style",a);else{var g;switch(l){case"bottom":g={display:"block",position:"fixed","z-index":"2147483645",bottom:"0px",left:"0px"};break;case"top":g={display:"block",position:"fixed","z-index":"2147483645",top:"0px",left:"0px","background-color":i.viewBackgroundColor};break;default:var u=e.el.parent();if(null!=u){var v=u.el.getBoundingClientRect();f=v.width,p=Math.floor(f*i.size.height/i.size.width)}else f=i.size.width,p=i.size.height;g={display:"inline-block",position:"relative","background-color":i.viewBackgroundColor}}g.width=f+"px",g.height=p+"px",g.margin="0",g.padding="0",g.border="none",d.css(g),Mvjssdk.Util.replaceEach(d.el,e.el.el)}var h=Mvjssdk.Configer.isDevTemplate?s.devUrl:s.url;if(c.css({width:"100%",height:"100%",margin:"0",padding:"0",border:"none"}).insertTo(d).attr("src",h+r),"true"==o){var m=d.size(),k=Math.floor(m.height/15);Mvjssdk.Render.addCloseButton(d,k)}}}}},getUrl:function(e,t){return Mvjssdk.Configer.host?{url:Mvjssdk.Configer.host+e,devUrl:Mvjssdk.Configer.host+t}:{url:e,devUrl:t}},addCloseButton:function(e,t,i){var s="rgba(255,255,255,0.3)",n="rgba(255,255,255,0.3)",r="rgba(255,255,255,1)",i=i||"righttop",o=i.indexOf("top")>=0?"top":"bottom",a=i.indexOf("left")>=0?"left":"right",l=Math.floor(t/2),d=Math.floor(t/3);Mvjssdk.Util.domHelper("div").css({display:"block",width:t+"px",height:t+"px","line-height":t+"px","text-align":"center",border:"3px solid "+n,"border-radius":l+"px",position:"absolute","z-index":2147483647,"font-family":"arial","font-size":t+"px",color:r,"background-color":s}).css(o,d+"px").css(a,d+"px").insertTo(e).bind("click",function(e){var t=Mvjssdk.Util.domHelper(this.parentNode);t.attr("jump")||(t.attr("jump",!0),t.remove(),Mvjssdk.Util.cancelBubble(e))}).bind("touchend",function(e){var t=Mvjssdk.Util.domHelper(this.parentNode);t.attr("jump")||(t.css("opacity","0.001").attr("jump",!0),window.setTimeout(function(){t.remove()},500),Mvjssdk.Util.cancelBubble(e))}).html(decodeURIComponent("%C3%97"))},template:{init:function(e,t){switch(Mvjssdk.Render.renderMode){case"template_receive_data":var i=Mvjssdk.Util.getQueryString(window.location.href,"data"),e=JSON.parse(decodeURIComponent(i));t(e);break;case"template_request_data":break;case"template_within_data":t(e),Mvjssdk.Offer.preClickOffer(e),Mvjssdk.Offer.setNoticeImpression(e);break;case"local_request_data":}}},renderAction:{template:function(e,t,i){i&&i()},local:function(e,t,i){}},renderOffer:function(e,t,i){Mvjssdk.Configer.isLogShow&&console.log(t.el.el);var s=this,n=(s.renderMode,t.viewType),r=e?JSON.parse(JSON.stringify(e)):null;if(r&&r.data&&r.data.only_impression_url&&(delete r.cache_time,delete r.msg,delete r.data.only_impression_url,delete r.data.parent_session_id,delete r.data.session_id,delete r.data.unit_size,r.data.ads))for(var o=s.viewType[t.viewType].offerQuantity,a=r.data.ads.length-1;a>=0;a--)a+1>o?r.data.ads.pop():(delete r.data.ads[a].ad_source_id,delete r.data.ads[a].c_ct,delete r.data.ads[a].click_mode,delete r.data.ads[a].fca,delete r.data.ads[a].fcb,delete r.data.ads[a].ttc,delete r.data.ads[a].ttc_ct,delete r.data.ads[a].impression_url);s.viewType[n].initFrame(t,r),r&&i&&i()},takeAction:function(e,t,i,s){e.attr("notice")||(e.attr("notice",!0),setTimeout(function(){e.el.removeAttribute("notice")},500),Mvjssdk.Offer.setNotice(s)),e.attr("jump")||(e.attr("jump",!0),setTimeout(function(){e.el.removeAttribute("jump")},500),e.attr("href",t))}};var Mvjssdk=Mvjssdk||{};Mvjssdk.Logger={debug:!0,uploadLog:!0,postType:"GA",init:function(){this.debug="true"==Mvjssdk.Util.getQueryString(window.location.href,"mvLogDebug")||(Mvjssdk.Configer.isLogShow||!1)},post:function(e){var t=this;if(1==this.uploadLog){var i=t.loggerSet[e.postType]?t.loggerSet[e.postType]:t.loggerSet[t.postType];i.doPost(e)}},loggerSet:{GA:{hasInit:!1,checkEnable:!0,GAId:"UA-62639739-1",_loadGA:function(e){var t=this;!function(e,t,i,s,n,r,o){e.GoogleAnalyticsObject=n,e[n]=e[n]||function(){(e[n].q=e[n].q||[]).push(arguments)},e[n].l=1*new Date,r=t.createElement(i),o=t.getElementsByTagName(i)[0],r.async=1,r.src=s,o.parentNode.insertBefore(r,o)}(window,document,"script","//www.google-analytics.com/analytics.js","ga"),ga("create",t.GAId,"auto"),ga("send","pageview"),t.hasInit=!0,e&&e()},doPost:function(e){var t=this;1==t.hasInit?t._doPost(e):t._loadGA(function(){t._doPost(e)})},_doPost:function(e){var t=parseInt(e.eventValue);isNaN(t)?ga("send","event","JSSDK_"+e.eventType,e.eventDesc,t):ga("send","event","JSSDK_"+e.eventType,e.eventDesc)}}}};var Mvjssdk=Mvjssdk||{};Mvjssdk.Util.addListener(document,"DOMContentLoaded",function(){var e=window.navigator.userAgent.toLowerCase();e.indexOf("googlebot")>=0||e.indexOf("search console")>=0||(Mvjssdk.Logger.init(),Mvjssdk.Configer.init()&&Mvjssdk.Offer.init())});
//# sourceMappingURL=maps/mvjssdk.js.map

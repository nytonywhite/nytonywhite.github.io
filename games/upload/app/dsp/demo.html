<html>
<head>
    <meta charset="UTF-8">
    <title>Mobvista DSP通用模版预览</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <link rel="dns-prefetch" href="https://adn.mobvista.com/">
    <link rel="apple-touch-icon" sizes="114x114" href="https://adn.mobvista.com/static/images/mvlogo114.png">
    <link rel="apple-touch-icon" sizes="72x72" href="https://adn.mobvista.com/static/images/mvlogo72.png">
    <link rel="apple-touch-icon" sizes="57x57" href="https://adn.mobvista.com/static/images/mvlogo57.png">
    <link rel="shortcut icon" href="https://adn.mobvista.com/static/images/favicon.ico" type="image/x-icon">
    <!--<link href="https://adn.mobvista.com/static/css/min/bootstrap_3.3.4.min.css?v=3.0.1" rel="stylesheet">-->
    <!--<script src="https://adn.mobvista.com/static/js/jquery-1x.min.js?v=3.0.1"></script>-->
    <script src="https://cdn.bootcss.com/jquery/1.11.3/jquery.min.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@3.3.7/dist/css/bootstrap.min.css"
          integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
    <script type="text/javascript">
        window.location.href = "https://newplayable.dspunion.com/dsp_preview/";
    </script>
    <style type="text/css">
        .page-header {
            margin: 0;
        }

        .content {
            min-height: 600px;
        }

        .left-box {
            background-color: #f3f3f3;
            padding: 20px 40px;
            height: 100%;
        }

        .right-box {
            height: 100%;
            padding: 20px 0;
            text-align: center;
        }

        .model-title {
            font-weight: bold;
        }

        .select-item {
            margin-bottom: 30px;
        }

        @media screen and (max-width: 920px) {
            .left-box {
                height: auto;
            }
        }

        #phone-box-vertical{
            position: absolute;
            top: 0;
            bottom: 0;
            left: 0;
            right: 0;
            margin: auto;
            opacity:1;
            min-width: 360px;
            display: inline-block;
            width: 360px;
            height: 728px;
            background: url("./phone.png") no-repeat center;
            background-size: 100% 100%;
            padding: 80px 20px;
        }

        .model-box {
            background-color: #fff;
            width: 100%;
            height: 100%;
        }
        #phone-box-transverse{
            position: absolute;
            top: 0;
            bottom: 0;
            left: 0;
            right: 0;
            margin: auto;
            display: inline-block;
            opacity: 0;
            width: 728px;
            height: 360px;
            background: url("./phone_transever.png") no-repeat center;
            background-size: 100% 100%;
            padding: 20px 80px;
        }
        iframe {
            width: 100%;
            height: 100%;
        }

        .footer {
            text-align: center;
            margin: 30px 0;
        }
        @media (max-width: 320px) {
            .phone-box {
                min-width: 280px;
                display: inline-block;
                width: 280px;
                height: 585px;
                background: url("./phone.png") no-repeat center;
                background-size: 100% 100%;
                padding: 80px 20px;
            }
        }
    </style>
</head>
<body>
<div class="container-fluid page-container">
    <div class="page-header">
        <h1>
            <a href="https://www.mobvista.com"><img src="https://adn.mobvista.com/static/images/mobvista.png"></a>
            Preview
        </h1>
    </div>
    <div class="content">
        <div class="row">
            <div class="col-md-2 left-box">
                <div>
                    <div class="row">
                        <div class="select-item col-sm-6 col-xs-12 col-md-12">
                            <select class="form-control" id="screenDirection">
                                <option value="竖屏">竖屏</option>
                                <option value="横屏">横屏</option>
                            </select>
                        </div>
                    </div>
                    <p class="model-title">DSP通用模版1期</p>
                    <div class="row">
                        <div class="select-item col-sm-6 col-xs-12 col-md-12">
                            <select class="form-control" id="adType">
                                <option value="">- adtype -</option>
                                <option value="banner">banner</option>
                                <option value="interstitial">interstitial</option>
                            </select>
                        </div>
                        <div class="select-item col-sm-6 col-xs-12 col-md-12">
                            <select class="form-control" id="template">
                            </select>
                        </div>
                    </div>
                    <!--<p>DSP通用模版2期</p>
                    <div class="select-box">
                        <div class="select-item">
                            <select class="form-control" id="adType">
                                <option value="">- adtype -</option>
                                <option value="banner">banner</option>
                                <option value="interstitial">interstitial</option>
                            </select>
                        </div>
                        <div class="select-item">
                            <select class="form-control" id="template">
                            </select>
                        </div>
                    </div>-->
                    <p class="model-title">RichMedia-Show模版</p>
                    <div class="row">
                        <div class="select-item col-sm-6 col-xs-12 col-md-12">
                            <select class="form-control" id="richMediaTemplate" onchange='templateChange(this)'>
                                <option value="">- Template -</option>
                                <option value="gallery">Photo Gallery</option>
                                <option value="animate">Animation</option>
                                <option value="video">Video</option>
                                <option value="game">Falling Object Game</option>
                            </select>
                        </div>
                        <div class="select-item col-sm-6 col-xs-12 col-md-12">
                            <select class="form-control" id="richMediaSize" onchange='sizeChange(this)'>
                                <option value="">- size -</option>
                                <option value="width=320xheight=50">320x50</option>
                                <option value="width=320xheight=480">320x480</option>
                                <option value="width=1200xheight=627">1200x627</option>
                            </select>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-10 right-box">
                <div class="phone-box" id="phone-box-vertical">
                    <div class="model-box">
                        <iframe src="https://newplayable.dspunion.com/dsp_model_test/m1/slider03/slider03.html"
                                frameborder="0" id="iframeUrl"></iframe>
                    </div>
                </div>
                <div class="phone-box" id="phone-box-transverse">
                    <div class="model-box">
                        <iframe src="https://newplayable.dspunion.com/dsp_model_test/m1/slider03/slider03.html"
                                frameborder="0" id="iframeUrlTransverse"></iframe>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="footer">
        Copyright © 2012-2018 Mobvista, All Rights Reserved.
    </div>
</div>
<script>
    (function (i, s, o, g, r, a, m) {
        i['GoogleAnalyticsObject'] = r;
        i[r] = i[r] || function () {
                (i[r].q = i[r].q || []).push(arguments) 
            }, i[r].l = 1 * new Date();
        a = s.createElement(o),
            m = s.getElementsByTagName(o)[0];
        a.async = 1;
        a.src = g;
        m.parentNode.insertBefore(a, m)
    })(window, document, 'script', 'https://www.google-analytics.com/analytics.js', 'ga');

    ga('create', 'UA-26206631-2', 'auto');
    ga('send', 'pageview');

    var env = "prop";
    let adData = {
        "banner": {
            "test": {
                "模版1": "https://test-dsp.rayjump.com/test/dsp_model_test/m1/banner01/banner01.html",
                "模版2": "https://test-dsp.rayjump.com/test/dsp_model_test/m1/banner02/banner02.html",
                "模版3": "https://test-dsp.rayjump.com/test/dsp_model_test/m1/banner03/banner03.html",
            },
            "prop": {
                "模版1": "https://newplayable.dspunion.com/dsp_model_test/m1/banner01/banner01.html",
                "模版2": "https://newplayable.dspunion.com/dsp_model_test/m1/banner02/banner02.html",
                "模版3": "https://newplayable.dspunion.com/dsp_model_test/m1/banner03/banner03.html",
            }
        },
        "interstitial": {
            "test": {
                "普通横模版1": "https://test-dsp.rayjump.com/test/dsp_model_test/m1/fullscreen01/fullscreen01.html",
                "普通横模版2": "https://test-dsp.rayjump.com/test/dsp_model_test/m1/fullscreen02/fullscreen02.html",
                "普通竖模版1": "https://test-dsp.rayjump.com/test/dsp_model_test/m1/fullscreen03/fullscreen03.html",
                "普通竖模版2": "https://test-dsp.rayjump.com/test/dsp_model_test/m1/fullscreen04/fullscreen04.html",
                "轮播竖模版1": "https://test-dsp.rayjump.com/test/dsp_model_test/m1/slider01/slider01.html",
                "轮播竖模版2": "https://test-dsp.rayjump.com/test/dsp_model_test/m1/slider03/slider03.html",
            },
            "prop": {
                "普通横模版1": "https://newplayable.dspunion.com/dsp_model_test/m1/fullscreen01/fullscreen01.html",
                "普通横模版2": "https://newplayable.dspunion.com/dsp_model_test/m1/fullscreen02/fullscreen02.html",
                "普通竖模版1": "https://newplayable.dspunion.com/dsp_model_test/m1/fullscreen03/fullscreen03.html",
                "普通竖模版2": "https://newplayable.dspunion.com/dsp_model_test/m1/fullscreen04/fullscreen04.html",
                "轮播竖模版1": "https://newplayable.dspunion.com/dsp_model_test/m1/slider01/slider01.html",
                "轮播竖模版2": "https://newplayable.dspunion.com/dsp_model_test/m1/slider03/slider03.html",
            }
        }
    };
    let templateOptionHtml = "";
    let iframeUrl = "";
    window.onload = function () {
        let adType = document.getElementById("adType");
        let template = document.getElementById("template");
        let screenDirection = document.getElementById("screenDirection");
        $(template).append(`<option>- Template -</option>`);
        if (adType && adType.addEventListener) {
            adType.addEventListener('change', function (e) {
                $(template).empty();
                $(template).append(`<option>- Template -</option>`);
                let ev = e || window.event;
                let target = ev.target || ev.srcElement;
                if (target.value) {
                    templateOptionHtml = "<option>- Template -</option>";
                    Object.keys(adData[target.value][env]).forEach(function(key){
                        let temp=adData[target.value][env];
                        templateOptionHtml += `<option value="${temp[key]}">${key}</option>`;
                    });
                    if (template) {
                        $(template).html(templateOptionHtml);
                    }
                }
            }, false)
        }
        if (template && template.addEventListener) {
            template.addEventListener('change', function (e) {
                let ev = e || window.event;
                let target = ev.target || ev.srcElement;
                iframeUrl = target.value;
                document.getElementById("iframeUrl").src = iframeUrl;
                document.getElementById("iframeUrlTransverse").src = iframeUrl;
            }, false)
        }
        if (screenDirection && screenDirection.addEventListener) {
            screenDirection.addEventListener('change', function (e) {
                let ev = e || window.event;
                let target = ev.target || ev.srcElement;
                if (target.value && target.value === "横屏") {
                    $("#phone-box-vertical").css({"opacity":"0"});
                    $("#phone-box-transverse").css({"opacity":"1"});
                } else if (target.value && target.value === "竖屏") {
                    $("#phone-box-vertical").css({"opacity":"1"});
                    $("#phone-box-transverse").css({"opacity":"0"});
                }
            }, false)
        }
    }
    var templateSet = {
        'animate': 'https://hybird.rayjump.com/dsp/tpl/phase1/animation.html',
        'video': 'https://hybird.rayjump.com/dsp/tpl/phase1/video.html',
        'game': 'https://hybird.rayjump.com/dsp/tpl/phase1/falling.html',
        'gallery': 'https://hybird.rayjump.com/dsp/tpl/phase1/photo.html'
    }

    function templateChange(el) {
        var type = el.selectedOptions[0].value;
        if (type.length > 0) {
            document.getElementById('iframeUrl').src = templateSet[type];
            document.getElementById("iframeUrlTransverse").src = templateSet[type];
        }

        updateScreen();

        clearPhoneSizeAction();
        if (type == 'animate') {
            window.checkPhoneSizeTimmer = window.setInterval(window.checkPhoneSizeAction, 200);
        }
    }

    function sizeChange(el) {
        var size = el.selectedOptions[0].value;
        var type = document.getElementById('richMediaTemplate').selectedOptions[0].value;

        updateScreen();
    }

    function updateScreen() {
        var size = document.getElementById('richMediaSize').selectedOptions[0].value;
        var type = document.getElementById('richMediaTemplate').selectedOptions[0].value;

        document.getElementById('iframeUrl').src = templateSet[type] + '?' + size.replace('x', '&');
        document.getElementById('iframeUrlTransverse').src = templateSet[type] + '?' + size.replace('x', '&');
    }


    function getTdSize() {
        var phone_box = $('#phone-box');
        var td_height = (window.innerHeight - phone_box.offset().top - 100);
        phone_box.addClass('scale').css({
            'height': td_height + 'px'
        });

        var phone_warp = $('.phone_warp').addClass('scale');
        var warp_height = phone_warp.height();
        var td_height = phone_box.height();
        var scale_rate = Math.floor(td_height * 100 / warp_height) / 100;
        phone_warp.css('transform', 'scale(' + scale_rate + ')');

    }


    function fitScreen() {
        if ($(window).width() < 600) {
            $('.phone_warp').removeClass('scale').css('transform', 'scale(1)');
            $('#phone-box').removeClass('scale').css('height', 'auto');

            var width = $('.phone_container').width();
            var scaleRate = width / 400;
            // var newHeight = nh/oh = scale
            $('.iframeUrl').css('transform', 'scale(' + scaleRate + ')').css('top', Math.floor(78 * scaleRate) + 'px')
        } else {
            $('.iframeUrl').css('transform', 'scale(1)').css('top', '');
            getTdSize();
        }
        phoneOrgWidth = $('#iframeUrl').width();
    }
    window.checkPhoneSizeTimmer = null;
    window.phoneOrgWidth = 0;
    window.hasChange = false;
    window.checkPhoneSizeAction = function () {
        var phoneWidth = $('#phone_screen').width();
        if ((phoneOrgWidth != phoneWidth)) {

            if (!hasChange) {
                var newPhoneWidth = phoneOrgWidth * (phoneOrgWidth / phoneWidth);
                $('#phone_screen').css('width', newPhoneWidth + 'px');
                window.hasChange = true;
            } else {
                $('#phone_screen').css('width', '');
                window.hasChange = false;
            }
        }
    }
    window.clearPhoneSizeAction = function () {
        if (checkPhoneSizeTimmer) window.clearInterval(window.checkPhoneSizeTimmer);
        $('#phone_screen').css('width', '');
        window.hasChange = false;
    }
</script>
</body>
</html>
;